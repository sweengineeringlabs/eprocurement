<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GovProcure - Unified eProcurement Platform</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=IBM+Plex+Sans:wght@300;400;500;600&family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
:root {
  --navy: #0d2145;
  --navy-mid: #163266;
  --navy-light: #1e4080;
  --blue: #1a5fce;
  --blue-light: #2d74e0;
  --accent: #c8973a;
  --accent-light: #e4b45a;
  --bg: #f4f5f7;
  --surface: #ffffff;
  --surface2: #f8f9fb;
  --border: #dde1ea;
  --border-strong: #c4cad8;
  --text: #0d1b2e;
  --text-mid: #3a4a62;
  --text-muted: #6b7a94;
  --green: #1a7a4a;
  --green-bg: #e8f5ee;
  --orange: #c26b12;
  --orange-bg: #fef3e2;
  --red: #c0392b;
  --red-bg: #fdecea;
  --blue-bg: #e8f0fd;
  --shadow-sm: 0 1px 3px rgba(13,33,69,0.06), 0 1px 2px rgba(13,33,69,0.04);
  --shadow: 0 4px 12px rgba(13,33,69,0.08), 0 1px 3px rgba(13,33,69,0.04);
  --shadow-lg: 0 12px 32px rgba(13,33,69,0.12), 0 4px 8px rgba(13,33,69,0.06);
}
* { margin: 0; padding: 0; box-sizing: border-box; }
body { background: var(--bg); color: var(--text); font-family: 'IBM Plex Sans', sans-serif; min-height: 100vh; display: flex; }

/* SIDEBAR */
.sidebar { width: 240px; min-height: 100vh; background: var(--navy); display: flex; flex-direction: column; position: fixed; left: 0; top: 0; bottom: 0; z-index: 200; }
.sidebar-brand { padding: 0 24px; height: 64px; display: flex; align-items: center; gap: 12px; border-bottom: 1px solid rgba(255,255,255,0.08); }
.brand-emblem { width: 36px; height: 36px; background: var(--accent); border-radius: 4px; display: flex; align-items: center; justify-content: center; font-family: 'Playfair Display', serif; font-weight: 700; font-size: 17px; color: var(--navy); }
.brand-name { font-weight: 600; font-size: 14px; color: #fff; line-height: 1.3; }
.brand-tagline { font-size: 10px; color: rgba(255,255,255,0.45); letter-spacing: 0.5px; }
.nav { flex: 1; padding: 20px 0; overflow-y: auto; }
.nav-section { font-size: 9.5px; font-weight: 600; letter-spacing: 1.5px; color: rgba(255,255,255,0.3); text-transform: uppercase; padding: 14px 24px 6px; }
.nav-item { display: flex; align-items: center; gap: 11px; padding: 9px 24px; cursor: pointer; font-size: 13px; color: rgba(255,255,255,0.62); transition: all 0.15s; border-left: 3px solid transparent; margin: 1px 0; }
.nav-item:hover { background: rgba(255,255,255,0.06); color: rgba(255,255,255,0.88); }
.nav-item.active { background: rgba(26,95,206,0.25); color: #fff; border-left-color: var(--accent); font-weight: 500; }
.nav-item svg { width: 15px; height: 15px; flex-shrink: 0; opacity: 0.8; }
.nav-item.active svg { opacity: 1; }
.nav-badge { margin-left: auto; background: var(--accent); color: var(--navy); font-size: 10px; font-weight: 700; padding: 1px 7px; border-radius: 3px; font-family: 'IBM Plex Mono', monospace; }
.nav-badge-new { margin-left: auto; background: var(--green); color: #fff; font-size: 9px; font-weight: 700; padding: 1px 6px; border-radius: 3px; letter-spacing: 0.5px; }
.sidebar-footer { padding: 16px 20px; border-top: 1px solid rgba(255,255,255,0.08); }
.user-card { display: flex; align-items: center; gap: 10px; }
.user-avatar { width: 34px; height: 34px; border-radius: 50%; background: var(--navy-light); border: 2px solid rgba(255,255,255,0.15); display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: 600; color: #fff; }
.user-name { font-size: 12.5px; font-weight: 500; color: #fff; }
.user-dept { font-size: 10.5px; color: rgba(255,255,255,0.4); }

/* MAIN */
.main { margin-left: 240px; flex: 1; display: flex; flex-direction: column; min-height: 100vh; }

/* TOPBAR */
.topbar { height: 64px; background: var(--surface); border-bottom: 1px solid var(--border); display: flex; align-items: center; padding: 0 32px; gap: 16px; position: sticky; top: 0; z-index: 100; box-shadow: var(--shadow-sm); }
.topbar-left { flex: 1; }
.topbar-title { font-family: 'Playfair Display', serif; font-weight: 600; font-size: 19px; color: var(--navy); }
.topbar-breadcrumb { font-size: 11px; color: var(--text-muted); margin-top: 1px; }
.topbar-breadcrumb span { color: var(--blue); }
.topbar-actions { display: flex; align-items: center; gap: 10px; }
.search-box { display: flex; align-items: center; gap: 8px; background: var(--surface2); border: 1px solid var(--border); border-radius: 4px; padding: 0 12px; height: 34px; width: 220px; }
.search-box input { background: none; border: none; outline: none; font-size: 12.5px; font-family: 'IBM Plex Sans', sans-serif; color: var(--text); width: 100%; }
.search-box input::placeholder { color: var(--text-muted); }

/* BUTTONS */
.btn { padding: 7px 16px; border-radius: 4px; font-size: 12.5px; font-weight: 500; cursor: pointer; border: none; font-family: 'IBM Plex Sans', sans-serif; transition: all 0.15s; display: inline-flex; align-items: center; gap: 6px; }
.btn-primary { background: var(--blue); color: #fff; }
.btn-primary:hover { background: var(--navy-light); }
.btn-secondary { background: var(--surface); color: var(--text-mid); border: 1px solid var(--border-strong); }
.btn-secondary:hover { background: var(--surface2); border-color: var(--blue); color: var(--blue); }
.btn-accent { background: var(--accent); color: var(--navy); font-weight: 600; }
.btn-accent:hover { background: var(--accent-light); }
.btn-success { background: var(--green); color: #fff; }
.btn-success:hover { background: #15643d; }
.btn-sm { padding: 5px 12px; font-size: 11.5px; }
.btn-xs { padding: 3px 9px; font-size: 11px; }
.btn:disabled { opacity: 0.5; cursor: not-allowed; }
.icon-btn { width: 34px; height: 34px; border-radius: 4px; background: var(--surface2); border: 1px solid var(--border); display: flex; align-items: center; justify-content: center; cursor: pointer; position: relative; color: var(--text-muted); transition: all 0.15s; }
.notif-dot { position: absolute; top: 5px; right: 5px; width: 6px; height: 6px; background: var(--red); border-radius: 50%; border: 1.5px solid var(--surface); }

/* PAGES */
.page { display: none; }
.page.active { display: block; animation: fadeIn 0.2s ease; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(6px); } to { opacity: 1; transform: none; } }
.page-body { padding: 28px 32px; }

/* PANELS */
.panel { background: var(--surface); border: 1px solid var(--border); border-radius: 6px; box-shadow: var(--shadow-sm); overflow: hidden; margin-bottom: 20px; }
.panel-header { padding: 14px 20px; border-bottom: 1px solid var(--border); display: flex; align-items: center; justify-content: space-between; background: var(--surface2); }
.panel-title { font-size: 13px; font-weight: 600; color: var(--navy); }
.panel-body { padding: 20px; }

/* STATUS */
.status { display: inline-flex; align-items: center; gap: 5px; padding: 3px 10px; border-radius: 3px; font-size: 11px; font-weight: 600; }
.status::before { content: ''; width: 5px; height: 5px; border-radius: 50%; }
.status-approved { background: var(--green-bg); color: var(--green); }
.status-approved::before { background: var(--green); }
.status-pending { background: var(--orange-bg); color: var(--orange); }
.status-pending::before { background: var(--orange); }
.status-active { background: var(--blue-bg); color: var(--blue); }
.status-active::before { background: var(--blue); }
.status-rejected { background: var(--red-bg); color: var(--red); }
.status-rejected::before { background: var(--red); }
.status-review { background: #f0e8ff; color: #6b21a8; }
.status-review::before { background: #6b21a8; }

/* KPI CARDS */
.kpi-row { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-bottom: 24px; }
.kpi-card { background: var(--surface); border: 1px solid var(--border); border-radius: 6px; padding: 20px 22px; box-shadow: var(--shadow-sm); position: relative; overflow: hidden; }
.kpi-card::after { content: ''; position: absolute; bottom: 0; left: 0; right: 0; height: 3px; }
.kpi-card.blue::after { background: var(--blue); }
.kpi-card.gold::after { background: var(--accent); }
.kpi-card.green::after { background: var(--green); }
.kpi-card.red::after { background: var(--red); }
.kpi-card.purple::after { background: #7c3aed; }
.kpi-label { font-size: 10.5px; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; color: var(--text-muted); margin-bottom: 10px; }
.kpi-value { font-family: 'Playfair Display', serif; font-size: 28px; font-weight: 600; color: var(--navy); margin-bottom: 6px; }
.kpi-delta { font-size: 11.5px; color: var(--text-muted); }
.kpi-delta .up { color: var(--green); font-weight: 600; }
.kpi-delta .dn { color: var(--red); font-weight: 600; }
.kpi-icon { position: absolute; right: 18px; top: 18px; width: 36px; height: 36px; border-radius: 6px; display: flex; align-items: center; justify-content: center; }
.kpi-icon.blue { background: var(--blue-bg); color: var(--blue); }
.kpi-icon.gold { background: var(--orange-bg); color: var(--orange); }
.kpi-icon.green { background: var(--green-bg); color: var(--green); }
.kpi-icon.red { background: var(--red-bg); color: var(--red); }
.kpi-icon.purple { background: #f0e8ff; color: #7c3aed; }

/* TABLE */
.data-table { width: 100%; border-collapse: collapse; }
.data-table thead th { padding: 10px 16px; text-align: left; font-size: 10.5px; font-weight: 600; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.8px; background: var(--surface2); border-bottom: 1px solid var(--border); }
.data-table tbody td { padding: 11px 16px; font-size: 12.5px; border-bottom: 1px solid var(--border); color: var(--text-mid); vertical-align: middle; }
.data-table tbody tr:last-child td { border-bottom: none; }
.data-table tbody tr:hover td { background: #f0f4ff; }
.id-cell { font-family: 'IBM Plex Mono', monospace; font-size: 11.5px; color: var(--blue); font-weight: 500; }
.mono { font-family: 'IBM Plex Mono', monospace; font-size: 12px; }
.amount-cell { font-family: 'IBM Plex Mono', monospace; font-size: 12px; font-weight: 600; color: var(--navy); }

/* TABS */
.tab-bar { display: flex; border-bottom: 1px solid var(--border); margin-bottom: 20px; }
.tab-item { padding: 10px 18px; font-size: 12.5px; font-weight: 500; cursor: pointer; color: var(--text-muted); border-bottom: 2px solid transparent; margin-bottom: -1px; transition: all 0.15s; }
.tab-item:hover { color: var(--navy); }
.tab-item.active { color: var(--blue); border-bottom-color: var(--blue); font-weight: 600; }
.tab-count { margin-left: 5px; background: var(--blue-bg); color: var(--blue); font-size: 10px; font-weight: 700; padding: 1px 6px; border-radius: 3px; }

/* GRID LAYOUTS */
.grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
.grid-3-2 { display: grid; grid-template-columns: 3fr 2fr; gap: 20px; margin-bottom: 20px; }
.grid-2-1 { display: grid; grid-template-columns: 2fr 1fr; gap: 20px; margin-bottom: 20px; }

/* CHART */
.chart-container { padding: 20px 20px 0; }
.chart-bars { display: flex; align-items: flex-end; gap: 10px; height: 140px; }
.chart-bar-wrap { flex: 1; display: flex; flex-direction: column; align-items: center; gap: 5px; height: 100%; justify-content: flex-end; }
.chart-bar { width: 100%; border-radius: 2px 2px 0 0; background: var(--blue-bg); border-top: 2px solid var(--blue); cursor: pointer; transition: all 0.15s; min-height: 4px; }
.chart-bar:hover { background: var(--blue); }
.chart-bar.current { background: var(--blue); opacity: 0.9; }
.chart-grid { border-top: 1px solid var(--border); margin: 0 20px; }

/* PROGRESS */
.progress-list { display: flex; flex-direction: column; gap: 14px; }
.progress-row { }
.progress-label-row { display: flex; justify-content: space-between; margin-bottom: 5px; }
.progress-label { font-size: 12px; color: var(--text-mid); font-weight: 500; }
.progress-pct { font-size: 11px; font-family: 'IBM Plex Mono', monospace; font-weight: 600; }
.progress-track { height: 5px; background: var(--border); border-radius: 99px; overflow: hidden; }
.progress-fill { height: 100%; border-radius: 99px; }
.fill-blue { background: var(--blue); }
.fill-green { background: var(--green); }
.fill-orange { background: var(--orange); }
.fill-red { background: var(--red); }

/* TIMELINE */
.timeline { display: flex; flex-direction: column; }
.tl-item { display: flex; gap: 14px; padding: 10px 0; position: relative; }
.tl-item:not(:last-child)::after { content: ''; position: absolute; left: 15px; top: 32px; bottom: -10px; width: 1px; background: var(--border); }
.tl-bullet { width: 10px; height: 10px; border-radius: 50%; margin-top: 5px; flex-shrink: 0; border: 2px solid; margin-left: 11px; }
.tl-done { border-color: var(--green); background: var(--green); }
.tl-active { border-color: var(--blue); background: var(--blue); }
.tl-pending { border-color: var(--border-strong); background: var(--surface); }
.tl-content .tl-title { font-size: 12.5px; font-weight: 500; color: var(--text); }
.tl-content .tl-meta { font-size: 11px; color: var(--text-muted); margin-top: 2px; }

/* STEPPER */
.stepper { display: flex; align-items: center; margin-bottom: 24px; }
.step-node { display: flex; align-items: center; gap: 8px; }
.step-num { width: 26px; height: 26px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 11.5px; font-weight: 700; flex-shrink: 0; }
.step-num.done { background: var(--green); color: #fff; }
.step-num.active { background: var(--blue); color: #fff; }
.step-num.waiting { background: var(--surface2); border: 1.5px solid var(--border-strong); color: var(--text-muted); }
.step-label-text { font-size: 12px; font-weight: 500; }
.step-label-text.done { color: var(--text-muted); }
.step-label-text.active { color: var(--blue); font-weight: 600; }
.step-label-text.waiting { color: var(--text-muted); }
.step-connector { flex: 1; height: 1px; background: var(--border); min-width: 24px; margin: 0 6px; }
.step-connector.done { background: var(--green); }

/* FORM */
.form-section { margin-bottom: 22px; }
.form-section-title { font-size: 11px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; color: var(--text-muted); border-bottom: 1px solid var(--border); padding-bottom: 8px; margin-bottom: 14px; }
.form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; }
.form-group { display: flex; flex-direction: column; gap: 5px; }
.form-group.span2 { grid-column: span 2; }
label { font-size: 11px; font-weight: 600; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.6px; }
input[type=text], input[type=number], input[type=date], select, textarea { background: var(--surface); border: 1px solid var(--border); border-radius: 4px; color: var(--text); padding: 8px 12px; font-size: 12.5px; font-family: 'IBM Plex Sans', sans-serif; outline: none; transition: border-color 0.15s; width: 100%; }
input:focus, select:focus, textarea:focus { border-color: var(--blue); box-shadow: 0 0 0 3px rgba(26,95,206,0.1); }
textarea { resize: vertical; min-height: 70px; }
.required-mark { color: var(--red); }

/* TENDER CARD */
.tender-card { background: var(--surface); border: 1px solid var(--border); border-radius: 6px; overflow: hidden; margin-bottom: 14px; box-shadow: var(--shadow-sm); transition: box-shadow 0.15s; }
.tender-card:hover { box-shadow: var(--shadow); }
.tender-header { padding: 16px 20px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: flex-start; }
.tender-type-tag { font-size: 9.5px; font-weight: 700; letter-spacing: 1.2px; text-transform: uppercase; color: var(--blue); background: var(--blue-bg); padding: 2px 8px; border-radius: 3px; display: inline-block; margin-bottom: 6px; }
.tender-name { font-size: 14px; font-weight: 600; color: var(--navy); }
.tender-desc { font-size: 12px; color: var(--text-muted); margin-top: 4px; line-height: 1.5; }
.tender-body { padding: 14px 20px; display: flex; gap: 0; border-bottom: 1px solid var(--border); }
.tender-meta-col { flex: 1; padding-right: 20px; border-right: 1px solid var(--border); margin-right: 20px; }
.tender-meta-col:last-child { border-right: none; padding-right: 0; margin-right: 0; }
.meta-label { font-size: 10px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.8px; color: var(--text-muted); margin-bottom: 3px; }
.meta-value { font-size: 13px; font-weight: 600; color: var(--navy); }
.meta-value.mono { font-family: 'IBM Plex Mono', monospace; }
.meta-value.warn { color: var(--red); }
.meta-value.caution { color: var(--orange); }
.tender-footer { padding: 10px 20px; display: flex; align-items: center; justify-content: space-between; background: var(--surface2); }
.bidder-stack { display: flex; align-items: center; gap: 8px; }
.bidder-avatars { display: flex; }
.bidder-av { width: 24px; height: 24px; border-radius: 50%; border: 2px solid var(--surface); background: var(--navy-mid); display: flex; align-items: center; justify-content: center; font-size: 9px; font-weight: 700; color: #fff; margin-right: -6px; }
.bidder-av:nth-child(2) { background: var(--blue); }
.bidder-av:nth-child(3) { background: var(--accent); color: var(--navy); }
.bid-text { font-size: 11.5px; color: var(--text-muted); margin-left: 14px; }

/* SUPPLIER CARD */
.supplier-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; }
.sup-card { background: var(--surface); border: 1px solid var(--border); border-radius: 6px; overflow: hidden; box-shadow: var(--shadow-sm); transition: box-shadow 0.15s; }
.sup-card:hover { box-shadow: var(--shadow); }
.sup-card-header { padding: 16px 18px 12px; border-bottom: 1px solid var(--border); }
.sup-identity { display: flex; align-items: center; gap: 12px; margin-bottom: 10px; }
.sup-logo { width: 40px; height: 40px; border-radius: 4px; border: 1px solid var(--border); display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 14px; font-family: 'Playfair Display', serif; flex-shrink: 0; }
.sup-name { font-size: 13.5px; font-weight: 600; color: var(--navy); }
.sup-cat { font-size: 11px; color: var(--text-muted); margin-top: 2px; }
.sup-card-stats { display: grid; grid-template-columns: 1fr 1fr 1fr; border-top: 1px solid var(--border); }
.sup-stat { padding: 10px 0; text-align: center; border-right: 1px solid var(--border); }
.sup-stat:last-child { border-right: none; }
.sup-stat-val { font-family: 'IBM Plex Mono', monospace; font-size: 14px; font-weight: 600; color: var(--navy); }
.sup-stat-lbl { font-size: 9.5px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.6px; color: var(--text-muted); margin-top: 2px; }
.sup-card-footer { padding: 10px 18px; background: var(--surface2); display: flex; justify-content: space-between; align-items: center; }
.star-row { display: flex; gap: 2px; }
.star { font-size: 11px; }
.star.filled { color: var(--accent); }
.star.empty { color: var(--border-strong); }
.risk-pill { font-size: 10px; font-weight: 700; text-transform: uppercase; padding: 2px 8px; border-radius: 3px; letter-spacing: 0.5px; }
.risk-low { background: var(--green-bg); color: var(--green); }
.risk-med { background: var(--orange-bg); color: var(--orange); }
.risk-high { background: var(--red-bg); color: var(--red); }

/* NOTICE BAR */
.notice-bar { background: #fff8e6; border: 1px solid #f0d070; border-radius: 6px; padding: 10px 16px; display: flex; align-items: center; gap: 10px; margin-bottom: 20px; font-size: 12.5px; color: #6b4e00; }
.notice-bar svg { flex-shrink: 0; color: var(--accent); }

/* OCR STYLES */
.ocr-layout { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; align-items: start; }
.drop-zone { border: 2px dashed var(--border-strong); border-radius: 8px; background: var(--surface2); padding: 48px 32px; text-align: center; cursor: pointer; transition: all 0.2s; position: relative; }
.drop-zone:hover, .drop-zone.dragover { border-color: var(--blue); background: var(--blue-bg); }
.drop-zone.has-file { border-color: var(--green); border-style: solid; background: var(--green-bg); }
.drop-icon { width: 56px; height: 56px; margin: 0 auto 16px; background: var(--blue-bg); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: var(--blue); }
.drop-title { font-size: 15px; font-weight: 600; color: var(--navy); margin-bottom: 6px; }
.drop-sub { font-size: 12.5px; color: var(--text-muted); margin-bottom: 16px; line-height: 1.5; }
.drop-formats { display: flex; gap: 8px; justify-content: center; flex-wrap: wrap; }
.format-pill { background: var(--surface); border: 1px solid var(--border); border-radius: 3px; padding: 3px 10px; font-size: 11px; font-weight: 600; color: var(--text-muted); font-family: 'IBM Plex Mono', monospace; }
#fileInput { display: none; }
.doc-preview { background: var(--surface2); border: 1px solid var(--border); border-radius: 6px; overflow: hidden; }
.doc-preview-header { padding: 10px 14px; background: var(--navy); color: #fff; font-size: 12px; font-weight: 500; display: flex; align-items: center; gap: 8px; }
.doc-preview-body { padding: 0; max-height: 380px; overflow-y: auto; display: flex; align-items: center; justify-content: center; background: #525659; }
.doc-preview-body img { max-width: 100%; max-height: 380px; object-fit: contain; }

/* OCR LOG */
.ocr-log { background: var(--navy); border-radius: 6px; padding: 14px; font-family: 'IBM Plex Mono', monospace; font-size: 11.5px; color: #a8c4f0; max-height: 140px; overflow-y: auto; line-height: 1.7; }
.log-line { display: flex; gap: 12px; }
.log-time { color: rgba(168,196,240,0.5); flex-shrink: 0; }
.log-info { color: #a8c4f0; }
.log-success { color: #6ee7b7; }
.log-warn { color: #fcd34d; }
.log-error { color: #fca5a5; }

/* TERMINAL (from ocr-system.html) */
.terminal { background: var(--navy); border-radius: 6px; padding: 14px; font-family: 'IBM Plex Mono', monospace; font-size: 11.5px; max-height: 160px; overflow-y: auto; display: flex; flex-direction: column; gap: 3px; }
.t-line { display: flex; gap: 14px; line-height: 1.6; }
.t-time { color: rgba(168,196,240,0.4); flex-shrink: 0; }
.t-info { color: #a8c4f0; }
.t-ok { color: #6ee7b7; }
.t-warn { color: #fcd34d; }
.t-err { color: #fca5a5; }
.t-cursor { display: inline-block; width: 7px; height: 13px; background: var(--accent); animation: blink 1s step-end infinite; vertical-align: text-bottom; }
@keyframes blink { 50% { opacity: 0; } }

/* SCAN BEAM (from ocr-system.html) */
.scan-beam { position: absolute; left: 0; right: 0; height: 2px; background: linear-gradient(90deg, transparent 0%, var(--blue) 20%, rgba(26,95,206,0.9) 50%, var(--blue) 80%, transparent 100%); box-shadow: 0 0 20px 4px rgba(26,95,206,0.3), 0 0 40px 8px rgba(26,95,206,0.1); animation: scanBeam 2.2s ease-in-out infinite; display: none; z-index: 10; }
@keyframes scanBeam { 0% { top: 0%; opacity: 0; } 5% { opacity: 1; } 95% { opacity: 1; } 100% { top: 100%; opacity: 0; } }

/* CONFIDENCE RING (from ocr-system.html) */
.conf-ring { width: 72px; height: 72px; flex-shrink: 0; position: relative; }
.conf-ring svg { transform: rotate(-90deg); }
.conf-ring-bg { fill: none; stroke: var(--border); stroke-width: 6; }
.conf-ring-fill { fill: none; stroke-width: 6; stroke-linecap: round; transition: stroke-dashoffset 1s ease; }
.conf-ring-text { position: absolute; inset: 0; display: flex; align-items: center; justify-content: center; font-family: 'Playfair Display', serif; font-size: 18px; color: var(--navy); }

/* EXTRACTED FIELDS */
.extracted-fields { display: flex; flex-direction: column; gap: 0; }
.field-row { display: flex; align-items: flex-start; padding: 10px 0; border-bottom: 1px solid var(--border); gap: 16px; }
.field-row:last-child { border-bottom: none; }
.field-label { font-size: 11px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.6px; color: var(--text-muted); width: 160px; flex-shrink: 0; padding-top: 8px; }
.field-input-wrap { flex: 1; position: relative; }
.field-input-wrap input { width: 100%; background: var(--surface); border: 1px solid var(--border); border-radius: 4px; padding: 7px 12px; font-size: 13px; font-family: 'IBM Plex Sans', sans-serif; color: var(--text); outline: none; }
.field-input-wrap input:focus { border-color: var(--blue); box-shadow: 0 0 0 3px rgba(26,95,206,0.1); }
.field-confidence { position: absolute; right: 8px; top: 50%; transform: translateY(-50%); font-size: 10px; font-weight: 700; font-family: 'IBM Plex Mono', monospace; padding: 2px 6px; border-radius: 3px; }
.conf-high { background: var(--green-bg); color: var(--green); }
.conf-med { background: var(--orange-bg); color: var(--orange); }
.conf-low { background: var(--red-bg); color: var(--red); }

/* LINE ITEMS TABLE */
.line-items-table { width: 100%; border-collapse: collapse; font-size: 12.5px; }
.line-items-table th { background: var(--surface2); border: 1px solid var(--border); padding: 8px 12px; text-align: left; font-size: 10.5px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.6px; color: var(--text-muted); }
.line-items-table td { border: 1px solid var(--border); padding: 6px 10px; vertical-align: middle; }
.line-items-table td input { width: 100%; border: none; outline: none; background: transparent; font-family: 'IBM Plex Sans', sans-serif; font-size: 12.5px; color: var(--text); }
.line-items-table td input:focus { background: var(--blue-bg); padding: 3px 6px; border-radius: 3px; }
.line-items-table tr.flagged td { background: var(--red-bg); }
.totals-row td { background: var(--surface2); font-weight: 600; }

/* VALIDATION */
.validation-list { display: flex; flex-direction: column; gap: 8px; }
.validation-item { display: flex; align-items: flex-start; gap: 10px; padding: 10px 12px; border-radius: 4px; font-size: 12.5px; }
.validation-item.pass { background: var(--green-bg); color: var(--green); }
.validation-item.warn { background: var(--orange-bg); color: var(--orange); }
.validation-item.fail { background: var(--red-bg); color: var(--red); }
.validation-item svg { flex-shrink: 0; margin-top: 1px; }

/* CONFIDENCE METER */
.confidence-meter { display: flex; align-items: center; gap: 10px; margin-top: 10px; }
.conf-bar-track { flex: 1; height: 6px; background: var(--border); border-radius: 99px; overflow: hidden; }
.conf-bar-fill { height: 100%; border-radius: 99px; transition: width 0.8s ease; }

/* DOC TYPE CHIPS */
.doc-type-chip { padding: 6px 14px; border-radius: 4px; font-size: 12px; font-weight: 600; cursor: pointer; background: var(--surface); color: var(--text-muted); border: 1px solid var(--border); transition: all 0.15s; }
.doc-type-chip:hover { border-color: var(--blue); color: var(--blue); }
.doc-type-chip.active { background: var(--blue); color: #fff; border-color: var(--blue); }

/* HISTORY BADGES */
.history-badge { display: inline-flex; align-items: center; padding: 2px 8px; border-radius: 3px; font-size: 10.5px; font-weight: 600; }
.hb-invoice { background: #e8f0fd; color: var(--blue); }
.hb-po { background: var(--green-bg); color: var(--green); }
.hb-delivery { background: var(--orange-bg); color: var(--orange); }
.hb-quote { background: #f0e8ff; color: #7c3aed; }
.hb-contract { background: #fdecea; color: var(--red); }

/* STEP PROGRESSION (from ocr-system.html) */
.steps-list { padding: 16px 20px; display: flex; flex-direction: column; gap: 4px; }
.step-item { display: flex; align-items: center; gap: 12px; padding: 10px 12px; border-radius: 4px; transition: all 0.15s; }
.step-item.current { background: var(--blue-bg); border: 1px solid rgba(26,95,206,0.2); }
.step-item.done { opacity: 0.7; }
.step-item.pending { opacity: 0.35; }
.step-badge { width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 11px; font-weight: 700; font-family: 'IBM Plex Mono', monospace; flex-shrink: 0; }
.step-badge.done { background: var(--green-bg); color: var(--green); border: 1px solid rgba(26,122,74,0.3); }
.step-badge.current { background: var(--blue-bg); color: var(--blue); border: 1px solid rgba(26,95,206,0.3); }
.step-badge.pending { background: var(--surface2); color: var(--text-muted); border: 1px solid var(--border); }
.step-name { font-size: 12.5px; font-weight: 500; color: var(--text); }
.step-desc { font-size: 11px; color: var(--text-muted); margin-top: 1px; }
.step-spinner { margin-left: auto; width: 16px; height: 16px; border: 2px solid var(--border); border-top-color: var(--blue); border-radius: 50%; animation: spin 0.7s linear infinite; }
@keyframes spin { to { transform: rotate(360deg); } }

/* PLACEHOLDER SECTION */
.placeholder-content { display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 400px; text-align: center; color: var(--text-muted); }
.placeholder-icon { width: 80px; height: 80px; background: var(--surface2); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 20px; color: var(--text-muted); }
.placeholder-title { font-family: 'Playfair Display', serif; font-size: 20px; color: var(--navy); margin-bottom: 8px; }
.placeholder-desc { font-size: 13px; max-width: 400px; line-height: 1.6; }

/* SCROLLBAR */
::-webkit-scrollbar { width: 5px; height: 5px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--border-strong); border-radius: 99px; }
</style>
</head>
<body>

<!-- SIDEBAR -->
<aside class="sidebar">
  <div class="sidebar-brand">
    <div class="brand-emblem">G</div>
    <div>
      <div class="brand-name">GovProcure</div>
      <div class="brand-tagline">Enterprise Edition v4.2</div>
    </div>
  </div>
  <nav class="nav">
    <div class="nav-section">Main</div>
    <a class="nav-item active" onclick="showPage('dashboard',this)">
      <svg fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24"><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
      Dashboard
    </a>
    <div class="nav-section">Procurement</div>
    <a class="nav-item" onclick="showPage('requisitions',this)">
      <svg fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="9" y1="13" x2="15" y2="13"/><line x1="9" y1="17" x2="15" y2="17"/></svg>
      Purchase Requisitions
      <span class="nav-badge">4</span>
    </a>
    <a class="nav-item" onclick="showPage('tenders',this)">
      <svg fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>
      Bidding & Tenders
    </a>
    <a class="nav-item" onclick="showPage('suppliers',this)">
      <svg fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87M16 3.13a4 4 0 010 7.75"/></svg>
      Supplier Management
    </a>
    <a class="nav-item" onclick="showPage('ocr-scan',this)">
      <svg fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M3 9h18M9 21V9"/></svg>
      Intelligent Document Scan
      <span class="nav-badge-new">NEW</span>
    </a>
    <div class="nav-section">Finance</div>
    <a class="nav-item" onclick="showPage('invoices',this)">
      <svg fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24"><path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2m-4-1h4m-4 0a1 1 0 00-1 1v1h6V5a1 1 0 00-1-1m-4 0H9"/></svg>
      Invoices
    </a>
    <a class="nav-item" onclick="showPage('budget',this)">
      <svg fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24"><path d="M12 2v20M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6"/></svg>
      Budget Control
    </a>
    <div class="nav-section">Reports</div>
    <a class="nav-item" onclick="showPage('analytics',this)">
      <svg fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24"><path d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/></svg>
      Analytics
    </a>
    <div class="nav-section">Administration</div>
    <a class="nav-item" onclick="showPage('dashboard',this)">
      <svg fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24"><circle cx="12" cy="12" r="3"/><path d="M19.07 4.93l-1.41 1.41M4.93 4.93l1.41 1.41M12 2v2M12 20v2M2 12h2M20 12h2M4.93 19.07l1.41-1.41M19.07 19.07l-1.41-1.41"/></svg>
      Settings
    </a>
  </nav>
  <div class="sidebar-footer">
    <div class="user-card">
      <div class="user-avatar">TM</div>
      <div>
        <div class="user-name">Thabo Molefe</div>
        <div class="user-dept">Procurement Officer</div>
      </div>
    </div>
  </div>
</aside>

<main class="main">

<!-- ═══════════════════════════════════════════════════════════════
     SECTION 1: DASHBOARD
════════════════════════════════════════════════════════════════ -->
<section class="page active" id="dashboard">
  <div class="topbar">
    <div class="topbar-left">
      <div class="topbar-title">Procurement Dashboard</div>
      <div class="topbar-breadcrumb">Home &rsaquo; <span id="breadcrumb-text">Dashboard</span></div>
    </div>
    <div class="topbar-actions">
      <div class="search-box">
        <svg width="13" height="13" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg>
        <input placeholder="Search orders, suppliers, tenders…" />
      </div>
      <div class="icon-btn">
        <svg width="15" height="15" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"/></svg>
        <div class="notif-dot"></div>
      </div>
      <button class="btn btn-accent btn-sm" onclick="createNewRequisition()">+ New Request</button>
    </div>
  </div>
  <div class="page-body">
    <div class="notice-bar">
      <svg width="15" height="15" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>
      <strong>Attention:</strong>&nbsp; 3 tenders are closing within 48 hours and 5 purchase requests are awaiting your approval.
      <button class="btn btn-secondary btn-xs" style="margin-left:auto" onclick="reviewPendingItems()">Review Now</button>
    </div>
    <div class="kpi-row">
      <div class="kpi-card blue">
        <div class="kpi-icon blue"><svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6"/></svg></div>
        <div class="kpi-label">Total Spend YTD</div>
        <div class="kpi-value">R 4.2M</div>
        <div class="kpi-delta"><span class="up">↑ 12.4%</span> vs prior year</div>
      </div>
      <div class="kpi-card gold">
        <div class="kpi-icon gold"><svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg></div>
        <div class="kpi-label">Pending Approvals</div>
        <div class="kpi-value">23</div>
        <div class="kpi-delta"><span class="dn">↑ 5</span> added today</div>
      </div>
      <div class="kpi-card green">
        <div class="kpi-icon green"><svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87M16 3.13a4 4 0 010 7.75"/></svg></div>
        <div class="kpi-label">Active Suppliers</div>
        <div class="kpi-value">148</div>
        <div class="kpi-delta"><span class="up">+8</span> onboarded this month</div>
      </div>
      <div class="kpi-card red">
        <div class="kpi-icon red"><svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg></div>
        <div class="kpi-label">Open Tenders</div>
        <div class="kpi-value">7</div>
        <div class="kpi-delta"><span class="dn">3</span> closing this week</div>
      </div>
    </div>
    <div class="grid-3-2">
      <div class="panel">
        <div class="panel-header">
          <div class="panel-title">Monthly Procurement Spend — FY 2025/2026</div>
          <button class="btn btn-secondary btn-xs" onclick="exportData('Spend Chart')">Export</button>
        </div>
        <div class="chart-container">
          <div class="chart-bars">
            <div class="chart-bar-wrap"><div class="chart-bar" style="height:55%"></div></div>
            <div class="chart-bar-wrap"><div class="chart-bar" style="height:70%"></div></div>
            <div class="chart-bar-wrap"><div class="chart-bar" style="height:48%"></div></div>
            <div class="chart-bar-wrap"><div class="chart-bar" style="height:82%"></div></div>
            <div class="chart-bar-wrap"><div class="chart-bar" style="height:62%"></div></div>
            <div class="chart-bar-wrap"><div class="chart-bar" style="height:75%"></div></div>
            <div class="chart-bar-wrap"><div class="chart-bar" style="height:58%"></div></div>
            <div class="chart-bar-wrap"><div class="chart-bar" style="height:90%"></div></div>
            <div class="chart-bar-wrap"><div class="chart-bar" style="height:68%"></div></div>
            <div class="chart-bar-wrap"><div class="chart-bar current" style="height:100%"></div></div>
            <div class="chart-bar-wrap"><div class="chart-bar" style="height:30%;opacity:0.35"></div></div>
            <div class="chart-bar-wrap"><div class="chart-bar" style="height:20%;opacity:0.35"></div></div>
          </div>
        </div>
        <div class="chart-grid"></div>
        <div style="display:flex;padding:6px 20px 16px;gap:0;">
          <div style="flex:1;text-align:center;font-size:10px;color:var(--text-muted);">Apr</div>
          <div style="flex:1;text-align:center;font-size:10px;color:var(--text-muted);">May</div>
          <div style="flex:1;text-align:center;font-size:10px;color:var(--text-muted);">Jun</div>
          <div style="flex:1;text-align:center;font-size:10px;color:var(--text-muted);">Jul</div>
          <div style="flex:1;text-align:center;font-size:10px;color:var(--text-muted);">Aug</div>
          <div style="flex:1;text-align:center;font-size:10px;color:var(--text-muted);">Sep</div>
          <div style="flex:1;text-align:center;font-size:10px;color:var(--text-muted);">Oct</div>
          <div style="flex:1;text-align:center;font-size:10px;color:var(--text-muted);">Nov</div>
          <div style="flex:1;text-align:center;font-size:10px;color:var(--text-muted);">Dec</div>
          <div style="flex:1;text-align:center;font-size:10px;color:var(--blue);font-weight:600;">Jan</div>
          <div style="flex:1;text-align:center;font-size:10px;color:var(--text-muted);">Feb</div>
          <div style="flex:1;text-align:center;font-size:10px;color:var(--text-muted);">Mar</div>
        </div>
      </div>
      <div class="panel">
        <div class="panel-header"><div class="panel-title">Budget Utilisation by Category</div></div>
        <div class="panel-body">
          <div class="progress-list">
            <div class="progress-row">
              <div class="progress-label-row"><span class="progress-label">IT & Technology</span><span class="progress-pct" style="color:var(--blue)">78%</span></div>
              <div class="progress-track"><div class="progress-fill fill-blue" style="width:78%"></div></div>
            </div>
            <div class="progress-row">
              <div class="progress-label-row"><span class="progress-label">Professional Services</span><span class="progress-pct" style="color:var(--orange)">91%</span></div>
              <div class="progress-track"><div class="progress-fill fill-orange" style="width:91%"></div></div>
            </div>
            <div class="progress-row">
              <div class="progress-label-row"><span class="progress-label">Facilities & Maintenance</span><span class="progress-pct" style="color:var(--green)">62%</span></div>
              <div class="progress-track"><div class="progress-fill fill-green" style="width:62%"></div></div>
            </div>
            <div class="progress-row">
              <div class="progress-label-row"><span class="progress-label">Office Supplies</span><span class="progress-pct" style="color:var(--green)">45%</span></div>
              <div class="progress-track"><div class="progress-fill fill-green" style="width:45%"></div></div>
            </div>
            <div class="progress-row">
              <div class="progress-label-row"><span class="progress-label">Security Services</span><span class="progress-pct" style="color:var(--blue)">57%</span></div>
              <div class="progress-track"><div class="progress-fill fill-blue" style="width:57%"></div></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="panel">
      <div class="panel-header">
        <div class="panel-title">Recent Purchase Orders</div>
        <button class="btn btn-secondary btn-sm" onclick="showPage('requisitions',null);showToast('Showing all purchase orders...','info')">View All Orders →</button>
      </div>
      <table class="data-table">
        <thead><tr><th>PO Reference</th><th>Supplier</th><th>Description</th><th>Category</th><th>Amount (ZAR)</th><th>Issue Date</th><th>Status</th><th></th></tr></thead>
        <tbody>
          <tr><td class="id-cell">PO-2026-0412</td><td style="font-weight:500">Datacom Solutions</td><td style="color:var(--text-muted)">20× Dell Latitude 5540 Laptops</td><td><span style="font-size:11px;background:var(--blue-bg);color:var(--blue);padding:2px 8px;border-radius:3px;font-weight:600">IT Hardware</span></td><td class="amount-cell">R 124,500.00</td><td style="font-size:12px;color:var(--text-muted)">24 Feb 2026</td><td><span class="status status-approved">Approved</span></td><td><button class="btn btn-secondary btn-xs" onclick="viewPurchaseOrder('PO-2026-0412')">View</button></td></tr>
          <tr><td class="id-cell">PO-2026-0411</td><td style="font-weight:500">Apex Stationery</td><td style="color:var(--text-muted)">Monthly stationery replenishment</td><td><span style="font-size:11px;background:#f0f0ff;color:#4f46e5;padding:2px 8px;border-radius:3px;font-weight:600">Office Supplies</span></td><td class="amount-cell">R 8,200.00</td><td style="font-size:12px;color:var(--text-muted)">23 Feb 2026</td><td><span class="status status-pending">Pending</span></td><td><button class="btn btn-secondary btn-xs" onclick="viewPurchaseOrder('PO-2026-0411')">View</button></td></tr>
          <tr><td class="id-cell">PO-2026-0410</td><td style="font-weight:500">BuildRight Ltd</td><td style="color:var(--text-muted)">Air-conditioning unit installation</td><td><span style="font-size:11px;background:#fff8e6;color:#6b4e00;padding:2px 8px;border-radius:3px;font-weight:600">Facilities</span></td><td class="amount-cell">R 56,000.00</td><td style="font-size:12px;color:var(--text-muted)">22 Feb 2026</td><td><span class="status status-active">In Transit</span></td><td><button class="btn btn-secondary btn-xs" onclick="viewPurchaseOrder('PO-2026-0410')">View</button></td></tr>
          <tr><td class="id-cell">PO-2026-0409</td><td style="font-weight:500">TechServ Group</td><td style="color:var(--text-muted)">Network security audit Q1</td><td><span style="font-size:11px;background:var(--green-bg);color:var(--green);padding:2px 8px;border-radius:3px;font-weight:600">Prof. Services</span></td><td class="amount-cell">R 290,000.00</td><td style="font-size:12px;color:var(--text-muted)">21 Feb 2026</td><td><span class="status status-approved">Approved</span></td><td><button class="btn btn-secondary btn-xs" onclick="viewPurchaseOrder('PO-2026-0409')">View</button></td></tr>
          <tr><td class="id-cell">PO-2026-0408</td><td style="font-weight:500">QuickPrint ZA</td><td style="color:var(--text-muted)">Annual report printing batch</td><td><span style="font-size:11px;background:var(--red-bg);color:var(--red);padding:2px 8px;border-radius:3px;font-weight:600">Marketing</span></td><td class="amount-cell">R 14,800.00</td><td style="font-size:12px;color:var(--text-muted)">20 Feb 2026</td><td><span class="status status-rejected">Rejected</span></td><td><button class="btn btn-secondary btn-xs" onclick="viewPurchaseOrder('PO-2026-0408')">View</button></td></tr>
        </tbody>
      </table>
    </div>
  </div>
</section>

<!-- ═══════════════════════════════════════════════════════════════
     SECTION 2: PURCHASE REQUISITIONS
════════════════════════════════════════════════════════════════ -->
<section class="page" id="requisitions">
  <div class="topbar">
    <div class="topbar-left">
      <div class="topbar-title">Purchase Requisitions</div>
      <div class="topbar-breadcrumb">Procurement &rsaquo; <span>Purchase Requests</span></div>
    </div>
    <div class="topbar-actions">
      <div class="search-box"><svg width="13" height="13" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg><input placeholder="Search by ID, item or requester…" /></div>
      <button class="btn btn-secondary btn-sm" onclick="exportData('Requisitions CSV')">Export CSV</button>
      <button class="btn btn-primary btn-sm" onclick="createNewRequisition()">+ New Requisition</button>
    </div>
  </div>
  <div class="page-body">
    <div class="grid-2-1">
      <div>
        <div class="panel" style="margin-bottom:0">
          <div class="panel-header">
            <div>
              <div class="panel-title">New Purchase Requisition — REQ-2026-442 (Draft)</div>
              <div style="font-size:11px;color:var(--text-muted);margin-top:2px;">All fields marked <span style="color:var(--red)">*</span> are mandatory</div>
            </div>
            <span class="status status-pending">Draft</span>
          </div>
          <div class="panel-body">
            <div class="stepper">
              <div class="step-node"><div class="step-num done">✓</div><div class="step-label-text done">Requester Info</div></div>
              <div class="step-connector done"></div>
              <div class="step-node"><div class="step-num active">2</div><div class="step-label-text active">Item Details</div></div>
              <div class="step-connector"></div>
              <div class="step-node"><div class="step-num waiting">3</div><div class="step-label-text waiting">Justification</div></div>
              <div class="step-connector"></div>
              <div class="step-node"><div class="step-num waiting">4</div><div class="step-label-text waiting">Review & Submit</div></div>
            </div>
            <div class="form-section">
              <div class="form-section-title">Item / Service Information</div>
              <div class="form-grid">
                <div class="form-group span2"><label>Item or Service Description <span class="required-mark">*</span></label><input type="text" placeholder="e.g. Dell Latitude 5540 Laptop Computers" /></div>
                <div class="form-group"><label>Procurement Category <span class="required-mark">*</span></label><select><option>— Select Category —</option><option selected>IT & Technology</option><option>Office Supplies</option><option>Professional Services</option><option>Facilities & Maintenance</option></select></div>
                <div class="form-group"><label>Specification / Part No.</label><input type="text" placeholder="e.g. LAT-5540-I5-16GB" /></div>
                <div class="form-group"><label>Quantity Required <span class="required-mark">*</span></label><input type="number" placeholder="0" /></div>
                <div class="form-group"><label>Unit of Measure</label><select><option>Each (EA)</option><option>Box</option><option>Litre</option><option>Hour</option></select></div>
                <div class="form-group"><label>Estimated Unit Cost (ZAR) <span class="required-mark">*</span></label><input type="number" placeholder="0.00" /></div>
                <div class="form-group"><label>Estimated Total (ZAR)</label><input type="text" placeholder="Auto-calculated" style="background:var(--surface2);color:var(--text-muted)" readonly /></div>
              </div>
            </div>
            <div class="form-section">
              <div class="form-section-title">Delivery & Scheduling</div>
              <div class="form-grid">
                <div class="form-group"><label>Required Delivery Date <span class="required-mark">*</span></label><input type="date" /></div>
                <div class="form-group"><label>Delivery Address</label><select><option>Pretoria Head Office</option><option>Johannesburg Regional</option><option>Cape Town Branch</option></select></div>
                <div class="form-group"><label>Preferred Supplier</label><select><option value="">— No Preference —</option><option>Datacom Solutions (Preferred)</option><option>Apex Stationery</option><option>TechServ Group</option></select></div>
                <div class="form-group"><label>Priority Level</label><select><option>Normal</option><option>High</option><option>Urgent</option></select></div>
              </div>
            </div>
            <div class="form-section">
              <div class="form-section-title">Budget & Authorization</div>
              <div class="form-grid">
                <div class="form-group"><label>Charging Cost Centre <span class="required-mark">*</span></label><select><option>IT Department — CC-001</option><option>Finance — CC-002</option><option>Operations — CC-003</option></select></div>
                <div class="form-group"><label>GL Account Code</label><input type="text" placeholder="e.g. 6200-CAPEX" /></div>
                <div class="form-group span2"><label>Business Justification <span class="required-mark">*</span></label><textarea placeholder="Provide a clear and detailed justification for this purchase…"></textarea></div>
              </div>
            </div>
            <div style="display:flex;justify-content:space-between;align-items:center;padding-top:8px;border-top:1px solid var(--border);">
              <button class="btn btn-secondary btn-sm" onclick="showToast('Returning to previous step...','info')">← Back</button>
              <div style="display:flex;gap:8px;"><button class="btn btn-secondary btn-sm" onclick="saveRequisitionDraft()">Save as Draft</button><button class="btn btn-primary btn-sm" onclick="submitRequisition()">Next: Justification →</button></div>
            </div>
          </div>
        </div>
      </div>
      <div style="display:flex;flex-direction:column;gap:16px;">
        <div class="panel">
          <div class="panel-header"><div class="panel-title">Approval Workflow</div></div>
          <div class="panel-body" style="padding:14px 18px;">
            <div class="timeline">
              <div class="tl-item"><div class="tl-bullet tl-done"></div><div class="tl-content"><div class="tl-title">Submitted — T. Molefe</div><div class="tl-meta">26 Feb 2026, 09:14</div></div></div>
              <div class="tl-item"><div class="tl-bullet tl-done"></div><div class="tl-content"><div class="tl-title">Budget Check — Passed</div><div class="tl-meta">26 Feb 2026, 09:15 · Automated</div></div></div>
              <div class="tl-item"><div class="tl-bullet tl-active"></div><div class="tl-content"><div class="tl-title">Line Manager Approval</div><div class="tl-meta">Awaiting · S. Dlamini</div></div></div>
              <div class="tl-item"><div class="tl-bullet tl-pending"></div><div class="tl-content"><div class="tl-title" style="color:var(--text-muted)">CFO Sign-off (if &gt; R50,000)</div><div class="tl-meta">Not yet reached</div></div></div>
              <div class="tl-item"><div class="tl-bullet tl-pending"></div><div class="tl-content"><div class="tl-title" style="color:var(--text-muted)">Purchase Order Generation</div><div class="tl-meta">Pending approval</div></div></div>
            </div>
          </div>
        </div>
        <div class="panel">
          <div class="panel-header"><div class="panel-title">Recent Requisitions</div></div>
          <table class="data-table">
            <thead><tr><th>REF</th><th>Item</th><th>Status</th></tr></thead>
            <tbody>
              <tr><td class="id-cell">REQ-441</td><td style="font-size:12px">Laptops ×10</td><td><span class="status status-pending">Pending</span></td></tr>
              <tr><td class="id-cell">REQ-440</td><td style="font-size:12px">Printer Ink</td><td><span class="status status-approved">Approved</span></td></tr>
              <tr><td class="id-cell">REQ-439</td><td style="font-size:12px">Legal Advisory</td><td><span class="status status-review">In Review</span></td></tr>
              <tr><td class="id-cell">REQ-438</td><td style="font-size:12px">Desk Chairs ×5</td><td><span class="status status-approved">Approved</span></td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- ═══════════════════════════════════════════════════════════════
     SECTION 3: BIDDING & TENDERS
════════════════════════════════════════════════════════════════ -->
<section class="page" id="tenders">
  <div class="topbar">
    <div class="topbar-left">
      <div class="topbar-title">Bidding & Tenders</div>
      <div class="topbar-breadcrumb">Procurement &rsaquo; <span>Tender Management</span></div>
    </div>
    <div class="topbar-actions">
      <div class="search-box"><svg width="13" height="13" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg><input placeholder="Search tenders…" /></div>
      <button class="btn btn-secondary btn-sm" onclick="filterItems('Tenders')">Filter</button>
      <button class="btn btn-primary btn-sm" onclick="createTender()">+ Create Tender</button>
    </div>
  </div>
  <div class="page-body">
    <div class="tab-bar" id="tenderTabs">
      <div class="tab-item active" onclick="switchTab(this,'tenderTabs')">Open Tenders <span class="tab-count">7</span></div>
      <div class="tab-item" onclick="switchTab(this,'tenderTabs')">Under Evaluation <span class="tab-count">3</span></div>
      <div class="tab-item" onclick="switchTab(this,'tenderTabs')">Awarded</div>
      <div class="tab-item" onclick="switchTab(this,'tenderTabs')">Cancelled / Closed</div>
    </div>
    <div class="tender-card">
      <div class="tender-header">
        <div>
          <div><span class="tender-type-tag">RFP</span> <span style="font-size:11px;font-family:'IBM Plex Mono',monospace;color:var(--text-muted);margin-left:6px">TND-2026-007</span></div>
          <div class="tender-name" style="margin-top:4px">Enterprise Resource Planning (ERP) System Implementation</div>
          <div class="tender-desc">Supply, configure, and implement a fully integrated ERP solution for 500 users covering finance, HR, procurement, and reporting.</div>
        </div>
        <div style="display:flex;flex-direction:column;align-items:flex-end;gap:6px;flex-shrink:0;margin-left:20px;">
          <span class="status status-approved">Open</span>
          <span class="risk-pill risk-low">Low Risk</span>
        </div>
      </div>
      <div class="tender-body">
        <div class="tender-meta-col"><div class="meta-label">Estimated Value</div><div class="meta-value mono">R 2,500,000</div></div>
        <div class="tender-meta-col"><div class="meta-label">Closing Date</div><div class="meta-value warn">28 Feb 2026</div></div>
        <div class="tender-meta-col"><div class="meta-label">Category</div><div class="meta-value">IT & Software</div></div>
        <div class="tender-meta-col"><div class="meta-label">Issuing Dept</div><div class="meta-value">ICT Directorate</div></div>
        <div class="tender-meta-col"><div class="meta-label">B-BBEE Req.</div><div class="meta-value">Level 4+</div></div>
      </div>
      <div class="tender-footer">
        <div class="bidder-stack"><div class="bidder-avatars"><div class="bidder-av">SA</div><div class="bidder-av">DT</div><div class="bidder-av">PW</div></div><span class="bid-text">6 bids received — evaluation commences 2 Mar</span></div>
        <div style="display:flex;gap:8px;"><button class="btn btn-secondary btn-sm" onclick="downloadTenderDoc('TND-2026-007','RFP')">Download RFP</button><button class="btn btn-primary btn-sm" onclick="evaluateBids('TND-2026-007')">Evaluate Bids →</button></div>
      </div>
    </div>
    <div class="tender-card">
      <div class="tender-header">
        <div>
          <div><span class="tender-type-tag">RFQ</span> <span style="font-size:11px;font-family:'IBM Plex Mono',monospace;color:var(--text-muted);margin-left:6px">TND-2026-006</span></div>
          <div class="tender-name" style="margin-top:4px">Office Furniture Supply — Pretoria Head Office Refurbishment</div>
          <div class="tender-desc">Supply and delivery of 80 workstations, 20 boardroom chairs, and 10 executive desks. SABS-compliant products mandatory.</div>
        </div>
        <div style="display:flex;flex-direction:column;align-items:flex-end;gap:6px;flex-shrink:0;margin-left:20px;">
          <span class="status status-pending">Closing Soon</span>
          <span class="risk-pill risk-med">Medium Risk</span>
        </div>
      </div>
      <div class="tender-body">
        <div class="tender-meta-col"><div class="meta-label">Estimated Value</div><div class="meta-value mono">R 480,000</div></div>
        <div class="tender-meta-col"><div class="meta-label">Closing Date</div><div class="meta-value caution">27 Feb 2026</div></div>
        <div class="tender-meta-col"><div class="meta-label">Category</div><div class="meta-value">Facilities</div></div>
        <div class="tender-meta-col"><div class="meta-label">Issuing Dept</div><div class="meta-value">Administration</div></div>
        <div class="tender-meta-col"><div class="meta-label">B-BBEE Req.</div><div class="meta-value">Level 3+</div></div>
      </div>
      <div class="tender-footer">
        <div class="bidder-stack"><div class="bidder-avatars"><div class="bidder-av">MM</div><div class="bidder-av">QF</div></div><span class="bid-text">2 bids received — minimum 3 required</span></div>
        <div style="display:flex;gap:8px;"><button class="btn btn-secondary btn-sm" onclick="downloadTenderDoc('TND-2026-006','RFQ')">Download RFQ</button><button class="btn btn-accent btn-sm" onclick="inviteSuppliers('TND-2026-006')">Invite Suppliers</button></div>
      </div>
    </div>
    <div class="tender-card">
      <div class="tender-header">
        <div>
          <div><span class="tender-type-tag">RFP</span> <span style="font-size:11px;font-family:'IBM Plex Mono',monospace;color:var(--text-muted);margin-left:6px">TND-2026-005</span></div>
          <div class="tender-name" style="margin-top:4px">Provision of Security Guard Services — All 12 Branch Locations</div>
          <div class="tender-desc">24/7 manned security for 12 offices nationally. PSIRA-registered companies only. Contract period: 24 months.</div>
        </div>
        <div style="display:flex;flex-direction:column;align-items:flex-end;gap:6px;flex-shrink:0;margin-left:20px;">
          <span class="status status-active">Open</span>
          <span class="risk-pill risk-low">Low Risk</span>
        </div>
      </div>
      <div class="tender-body">
        <div class="tender-meta-col"><div class="meta-label">Estimated Value</div><div class="meta-value mono">R 1,800,000</div></div>
        <div class="tender-meta-col"><div class="meta-label">Closing Date</div><div class="meta-value">15 Mar 2026</div></div>
        <div class="tender-meta-col"><div class="meta-label">Category</div><div class="meta-value">Security Services</div></div>
        <div class="tender-meta-col"><div class="meta-label">Issuing Dept</div><div class="meta-value">Facilities Mgmt</div></div>
        <div class="tender-meta-col"><div class="meta-label">B-BBEE Req.</div><div class="meta-value">Level 2+</div></div>
      </div>
      <div class="tender-footer">
        <div class="bidder-stack"><div class="bidder-avatars"><div class="bidder-av">KS</div></div><span class="bid-text">1 bid received — tender open until 15 Mar</span></div>
        <div style="display:flex;gap:8px;"><button class="btn btn-secondary btn-sm" onclick="downloadTenderDoc('TND-2026-005','RFP')">Download RFP</button><button class="btn btn-secondary btn-sm" onclick="viewTenderDetails('TND-2026-005')">View Details →</button></div>
      </div>
    </div>
  </div>
</section>

<!-- ═══════════════════════════════════════════════════════════════
     SECTION 4: SUPPLIER MANAGEMENT
════════════════════════════════════════════════════════════════ -->
<section class="page" id="suppliers">
  <div class="topbar">
    <div class="topbar-left">
      <div class="topbar-title">Supplier Management</div>
      <div class="topbar-breadcrumb">Procurement &rsaquo; <span>Vendors & Suppliers</span></div>
    </div>
    <div class="topbar-actions">
      <div class="search-box"><svg width="13" height="13" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg><input placeholder="Search suppliers…" /></div>
      <button class="btn btn-secondary btn-sm" onclick="filterItems('Suppliers')">Filter</button>
      <button class="btn btn-secondary btn-sm" onclick="exportData('Suppliers')">Export</button>
      <button class="btn btn-primary btn-sm" onclick="addSupplier()">+ Add Supplier</button>
    </div>
  </div>
  <div class="page-body">
    <div class="tab-bar" id="supplierTabs">
      <div class="tab-item active" onclick="switchTab(this,'supplierTabs')">All Suppliers <span class="tab-count">148</span></div>
      <div class="tab-item" onclick="switchTab(this,'supplierTabs')">Preferred <span class="tab-count">32</span></div>
      <div class="tab-item" onclick="switchTab(this,'supplierTabs')">Pending Vetting <span class="tab-count">11</span></div>
      <div class="tab-item" onclick="switchTab(this,'supplierTabs')">Suspended</div>
      <div class="tab-item" onclick="switchTab(this,'supplierTabs')">Blacklisted</div>
    </div>
    <div class="supplier-grid">
      <div class="sup-card">
        <div class="sup-card-header">
          <div class="sup-identity"><div class="sup-logo" style="background:#e8f0fd;color:var(--blue)">DC</div><div><div class="sup-name">Datacom Solutions (Pty) Ltd</div><div class="sup-cat">IT Hardware & Software · CSD: 0041-2887</div></div></div>
          <div style="display:flex;justify-content:space-between;align-items:center;"><span class="status status-approved">Preferred Supplier</span><span class="risk-pill risk-low">B-BBEE Lvl 2</span></div>
        </div>
        <div class="sup-card-stats">
          <div class="sup-stat"><div class="sup-stat-val" style="color:var(--navy)">R 890k</div><div class="sup-stat-lbl">Total Spend</div></div>
          <div class="sup-stat"><div class="sup-stat-val" style="color:var(--green)">98%</div><div class="sup-stat-lbl">On-Time Del.</div></div>
          <div class="sup-stat"><div class="sup-stat-val">34</div><div class="sup-stat-lbl">Orders</div></div>
        </div>
        <div class="sup-card-footer"><div class="star-row"><span class="star filled">★</span><span class="star filled">★</span><span class="star filled">★</span><span class="star filled">★</span><span class="star filled">★</span><span style="font-size:11px;color:var(--text-muted);margin-left:5px;">5.0</span></div><button class="btn btn-secondary btn-xs" onclick="viewSupplierProfile('Datacom Solutions')">View Profile</button></div>
      </div>
      <div class="sup-card">
        <div class="sup-card-header">
          <div class="sup-identity"><div class="sup-logo" style="background:var(--green-bg);color:var(--green)">TS</div><div><div class="sup-name">TechServ Group</div><div class="sup-cat">Professional Services · CSD: 0083-1144</div></div></div>
          <div style="display:flex;justify-content:space-between;align-items:center;"><span class="status status-approved">Preferred Supplier</span><span class="risk-pill risk-low">B-BBEE Lvl 1</span></div>
        </div>
        <div class="sup-card-stats">
          <div class="sup-stat"><div class="sup-stat-val" style="color:var(--navy)">R 1.2M</div><div class="sup-stat-lbl">Total Spend</div></div>
          <div class="sup-stat"><div class="sup-stat-val" style="color:var(--orange)">91%</div><div class="sup-stat-lbl">On-Time Del.</div></div>
          <div class="sup-stat"><div class="sup-stat-val">22</div><div class="sup-stat-lbl">Orders</div></div>
        </div>
        <div class="sup-card-footer"><div class="star-row"><span class="star filled">★</span><span class="star filled">★</span><span class="star filled">★</span><span class="star filled">★</span><span class="star empty">★</span><span style="font-size:11px;color:var(--text-muted);margin-left:5px;">4.2</span></div><button class="btn btn-secondary btn-xs" onclick="viewSupplierProfile('TechServ Group')">View Profile</button></div>
      </div>
      <div class="sup-card">
        <div class="sup-card-header">
          <div class="sup-identity"><div class="sup-logo" style="background:var(--orange-bg);color:var(--orange)">BR</div><div><div class="sup-name">BuildRight Ltd</div><div class="sup-cat">Facilities & Construction · CSD: 0022-5531</div></div></div>
          <div style="display:flex;justify-content:space-between;align-items:center;"><span class="status status-active">Active</span><span class="risk-pill risk-med">B-BBEE Lvl 4</span></div>
        </div>
        <div class="sup-card-stats">
          <div class="sup-stat"><div class="sup-stat-val" style="color:var(--navy)">R 340k</div><div class="sup-stat-lbl">Total Spend</div></div>
          <div class="sup-stat"><div class="sup-stat-val" style="color:var(--orange)">85%</div><div class="sup-stat-lbl">On-Time Del.</div></div>
          <div class="sup-stat"><div class="sup-stat-val">11</div><div class="sup-stat-lbl">Orders</div></div>
        </div>
        <div class="sup-card-footer"><div class="star-row"><span class="star filled">★</span><span class="star filled">★</span><span class="star filled">★</span><span class="star filled">★</span><span class="star empty">★</span><span style="font-size:11px;color:var(--text-muted);margin-left:5px;">3.9</span></div><button class="btn btn-secondary btn-xs" onclick="viewSupplierProfile('BuildRight Ltd')">View Profile</button></div>
      </div>
      <div class="sup-card">
        <div class="sup-card-header">
          <div class="sup-identity"><div class="sup-logo" style="background:#f0e8ff;color:#6b21a8">AS</div><div><div class="sup-name">Apex Stationery cc</div><div class="sup-cat">Office Supplies · CSD: 0067-9902</div></div></div>
          <div style="display:flex;justify-content:space-between;align-items:center;"><span class="status status-active">Active</span><span class="risk-pill risk-low">B-BBEE Lvl 1</span></div>
        </div>
        <div class="sup-card-stats">
          <div class="sup-stat"><div class="sup-stat-val" style="color:var(--navy)">R 78k</div><div class="sup-stat-lbl">Total Spend</div></div>
          <div class="sup-stat"><div class="sup-stat-val" style="color:var(--green)">100%</div><div class="sup-stat-lbl">On-Time Del.</div></div>
          <div class="sup-stat"><div class="sup-stat-val">18</div><div class="sup-stat-lbl">Orders</div></div>
        </div>
        <div class="sup-card-footer"><div class="star-row"><span class="star filled">★</span><span class="star filled">★</span><span class="star filled">★</span><span class="star filled">★</span><span class="star filled">★</span><span style="font-size:11px;color:var(--text-muted);margin-left:5px;">4.8</span></div><button class="btn btn-secondary btn-xs" onclick="viewSupplierProfile('Apex Stationery')">View Profile</button></div>
      </div>
      <div class="sup-card">
        <div class="sup-card-header">
          <div class="sup-identity"><div class="sup-logo" style="background:var(--red-bg);color:var(--red)">QP</div><div><div class="sup-name">QuickPrint ZA</div><div class="sup-cat">Printing & Marketing · CSD: 0091-3347</div></div></div>
          <div style="display:flex;justify-content:space-between;align-items:center;"><span class="status status-review">Under Review</span><span class="risk-pill risk-high">B-BBEE Lvl 6</span></div>
        </div>
        <div class="sup-card-stats">
          <div class="sup-stat"><div class="sup-stat-val" style="color:var(--navy)">R 42k</div><div class="sup-stat-lbl">Total Spend</div></div>
          <div class="sup-stat"><div class="sup-stat-val" style="color:var(--red)">71%</div><div class="sup-stat-lbl">On-Time Del.</div></div>
          <div class="sup-stat"><div class="sup-stat-val">7</div><div class="sup-stat-lbl">Orders</div></div>
        </div>
        <div class="sup-card-footer"><div class="star-row"><span class="star filled">★</span><span class="star filled">★</span><span class="star filled">★</span><span class="star empty">★</span><span class="star empty">★</span><span style="font-size:11px;color:var(--text-muted);margin-left:5px;">3.1</span></div><button class="btn btn-secondary btn-xs" onclick="viewSupplierProfile('QuickPrint ZA')">View Profile</button></div>
      </div>
      <div class="sup-card" style="border:1.5px dashed var(--border-strong);box-shadow:none;display:flex;align-items:center;justify-content:center;flex-direction:column;gap:10px;min-height:200px;cursor:pointer;background:var(--surface2);" onclick="addSupplier()">
        <div style="width:40px;height:40px;border-radius:50%;border:1.5px dashed var(--border-strong);display:flex;align-items:center;justify-content:center;font-size:20px;color:var(--text-muted)">+</div>
        <div style="font-size:12.5px;font-weight:600;color:var(--text-muted)">Register New Supplier</div>
        <div style="font-size:11px;color:var(--text-muted);text-align:center">CSD verification required</div>
      </div>
    </div>
  </div>
</section>

<!-- ═══════════════════════════════════════════════════════════════
     SECTION 5: OCR DOCUMENT SCAN
════════════════════════════════════════════════════════════════ -->
<section class="page" id="ocr-scan">
  <div class="topbar">
    <div class="topbar-left">
      <div class="topbar-title">Intelligent Document Scan</div>
      <div class="topbar-breadcrumb">Procurement &rsaquo; <span>OCR Document Processing</span></div>
    </div>
    <div class="topbar-actions">
      <div class="search-box"><svg width="13" height="13" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg><input placeholder="Search processed documents…" /></div>
      <div class="icon-btn"><svg width="15" height="15" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"/></svg><div class="notif-dot"></div></div>
      <button class="btn btn-accent btn-sm" onclick="resetOcr()"><svg width="12" height="12" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><polyline points="1 4 1 10 7 10"/><path d="M3.51 15a9 9 0 102.13-9.36L1 10"/></svg>New Scan</button>
    </div>
  </div>
  <div class="page-body">
    <div class="kpi-row">
      <div class="kpi-card blue"><div class="kpi-icon blue"><svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M3 9h18M9 21V9"/></svg></div><div class="kpi-label">Docs Processed Today</div><div class="kpi-value">47</div><div class="kpi-delta"><span class="up">↑ 18%</span> vs yesterday</div></div>
      <div class="kpi-card green"><div class="kpi-icon green"><svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg></div><div class="kpi-label">Avg. Accuracy Rate</div><div class="kpi-value">96.4%</div><div class="kpi-delta"><span class="up">+1.2%</span> this week</div></div>
      <div class="kpi-card gold"><div class="kpi-icon gold"><svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg></div><div class="kpi-label">Avg. Processing Time</div><div class="kpi-value">4.2s</div><div class="kpi-delta">Per document</div></div>
      <div class="kpi-card purple"><div class="kpi-icon purple"><svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg></div><div class="kpi-label">Flagged for Review</div><div class="kpi-value">3</div><div class="kpi-delta"><span class="dn">Needs attention</span></div></div>
    </div>
    <div id="uploadSection">
      <div class="grid-3-2" style="align-items:start;">
        <div>
          <div class="panel">
            <div class="panel-header">
              <div class="panel-title"><svg width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" style="display:inline;margin-right:6px;vertical-align:middle"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>Upload Document for OCR Processing</div>
              <div style="display:flex;gap:6px;align-items:center;"><span style="font-size:11px;color:var(--text-muted)">Powered by Claude AI</span><span style="width:8px;height:8px;border-radius:50%;background:var(--green);display:inline-block;"></span></div>
            </div>
            <div class="panel-body">
              <div style="display:flex;gap:8px;margin-bottom:16px;flex-wrap:wrap;">
                <div class="doc-type-chip active" onclick="selectDocType(this,'invoice')">Invoice</div>
                <div class="doc-type-chip" onclick="selectDocType(this,'purchase_order')">Purchase Order</div>
                <div class="doc-type-chip" onclick="selectDocType(this,'delivery_note')">Delivery Note</div>
                <div class="doc-type-chip" onclick="selectDocType(this,'quotation')">Quotation</div>
                <div class="doc-type-chip" onclick="selectDocType(this,'contract')">Contract</div>
                <div class="doc-type-chip" onclick="selectDocType(this,'auto')">Auto-Detect</div>
              </div>
              <input type="file" id="fileInput" accept="image/*,.pdf" onchange="handleFileSelect(event)" />
              <div class="drop-zone" id="dropZone" onclick="document.getElementById('fileInput').click()" ondragover="event.preventDefault();this.classList.add('dragover')" ondragleave="this.classList.remove('dragover')" ondrop="handleDrop(event)">
                <div class="drop-icon" id="dropIcon"><svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg></div>
                <div class="drop-title" id="dropTitle">Drag & drop your document here</div>
                <div class="drop-sub" id="dropSub">Or click to browse your files. Scanned PDFs, photos of documents, and image files are all supported.</div>
                <div class="drop-formats"><span class="format-pill">PDF</span><span class="format-pill">JPG</span><span class="format-pill">PNG</span><span class="format-pill">TIFF</span><span class="format-pill">WEBP</span></div>
                <div class="scan-beam" id="scanBeam"></div>
              </div>
              <div class="doc-preview" id="docPreview" style="margin-top:16px;display:none;">
                <div class="doc-preview-header"><svg width="13" height="13" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/></svg><span id="previewFilename">document.jpg</span><span id="previewSize" style="margin-left:auto;opacity:0.6;font-size:10.5px;"></span></div>
                <div class="doc-preview-body" id="previewBody"><div style="padding:60px 20px;text-align:center;color:#aaa;font-size:12.5px;">Preview loading…</div></div>
              </div>
              <div style="margin-top:16px;display:flex;gap:10px;align-items:center;">
                <button class="btn btn-primary" id="processBtn" onclick="processOCR()" disabled style="flex:1;justify-content:center;"><svg width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg>Process Document with AI OCR</button>
                <button class="btn btn-secondary btn-sm" onclick="resetOcr()">Clear</button>
              </div>
            </div>
          </div>
        </div>
        <div>
          <div class="panel" id="stepsPanel" style="display:none;">
            <div class="panel-header"><div class="panel-title">Processing Steps</div></div>
            <div class="steps-list" id="stepsList">
              <div class="step-item pending" id="step-upload"><div class="step-badge pending">1</div><div><div class="step-name">Upload</div><div class="step-desc">Document received</div></div></div>
              <div class="step-item pending" id="step-preprocess"><div class="step-badge pending">2</div><div><div class="step-name">Pre-process</div><div class="step-desc">Image enhancement</div></div></div>
              <div class="step-item pending" id="step-vision"><div class="step-badge pending">3</div><div><div class="step-name">Vision Analysis</div><div class="step-desc">Claude AI extraction</div></div></div>
              <div class="step-item pending" id="step-parse"><div class="step-badge pending">4</div><div><div class="step-name">Parse Data</div><div class="step-desc">Structure fields</div></div></div>
              <div class="step-item pending" id="step-validate"><div class="step-badge pending">5</div><div><div class="step-name">Validate</div><div class="step-desc">Business rules check</div></div></div>
            </div>
          </div>
          <div class="panel">
            <div class="panel-header"><div class="panel-title">Processing Log</div><span id="logStatus" class="status status-active" style="display:none">Processing</span></div>
            <div class="panel-body" style="padding:14px;">
              <div class="terminal" id="ocrLog"><div class="t-line"><span class="t-time">--:--:--</span><span class="t-info">System ready. Awaiting document upload…</span><span class="t-cursor"></span></div></div>
            </div>
          </div>
          <div class="panel" id="validationPanel" style="display:none;">
            <div class="panel-header"><div class="panel-title">Validation Results</div></div>
            <div class="panel-body" style="padding:14px;"><div class="validation-list" id="validationList"></div></div>
          </div>
          <div class="panel">
            <div class="panel-header"><div class="panel-title">Supported Document Types</div></div>
            <div class="panel-body" style="padding:14px;">
              <div style="display:flex;flex-direction:column;gap:8px;">
                <div style="display:flex;align-items:center;gap:10px;font-size:12.5px;color:var(--text-mid);"><span style="width:28px;height:28px;background:var(--blue-bg);border-radius:4px;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:700;color:var(--blue);flex-shrink:0;">INV</span><div><div style="font-weight:500">Supplier Invoices</div><div style="font-size:11px;color:var(--text-muted)">VAT, line items, totals</div></div></div>
                <div style="display:flex;align-items:center;gap:10px;font-size:12.5px;color:var(--text-mid);"><span style="width:28px;height:28px;background:var(--green-bg);border-radius:4px;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:700;color:var(--green);flex-shrink:0;">PO</span><div><div style="font-weight:500">Purchase Orders</div><div style="font-size:11px;color:var(--text-muted)">Vendor, items, pricing</div></div></div>
                <div style="display:flex;align-items:center;gap:10px;font-size:12.5px;color:var(--text-mid);"><span style="width:28px;height:28px;background:var(--orange-bg);border-radius:4px;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:700;color:var(--orange);flex-shrink:0;">DN</span><div><div style="font-weight:500">Delivery Notes</div><div style="font-size:11px;color:var(--text-muted)">GRN matching, quantities</div></div></div>
                <div style="display:flex;align-items:center;gap:10px;font-size:12.5px;color:var(--text-mid);"><span style="width:28px;height:28px;background:#f0e8ff;border-radius:4px;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:700;color:#7c3aed;flex-shrink:0;">QT</span><div><div style="font-weight:500">Quotations</div><div style="font-size:11px;color:var(--text-muted)">Pricing, validity, terms</div></div></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="resultsSection" style="display:none;">
      <div class="panel">
        <div class="panel-header">
          <div><div class="panel-title"><svg width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" style="display:inline;margin-right:6px;vertical-align:middle;color:var(--green)"><polyline points="20 6 9 17 4 12"/></svg>Extracted Data — <span id="resultDocType">Invoice</span></div><div style="font-size:11px;color:var(--text-muted);margin-top:2px;">Review and correct extracted fields before saving</div></div>
          <div style="display:flex;gap:8px;align-items:center;">
            <div style="display:flex;align-items:center;gap:8px;">
              <div class="conf-ring" id="confRing"><svg width="72" height="72" viewBox="0 0 72 72"><circle class="conf-ring-bg" cx="36" cy="36" r="30"/><circle class="conf-ring-fill" cx="36" cy="36" r="30" stroke="var(--green)" stroke-dasharray="188.5" stroke-dashoffset="188.5" id="confRingFill"/></svg><div class="conf-ring-text" id="confRingText">0%</div></div>
            </div>
            <span class="status status-approved" id="resultStatus">Extracted</span>
          </div>
        </div>
        <div class="panel-body">
          <div class="grid-3-2" style="align-items:start;gap:20px;">
            <div>
              <div style="font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--text-muted);border-bottom:1px solid var(--border);padding-bottom:8px;margin-bottom:4px;">Document Header Fields</div>
              <div class="extracted-fields" id="extractedFields"></div>
            </div>
            <div style="display:flex;flex-direction:column;gap:14px;">
              <div id="miniPreview" style="background:var(--surface2);border:1px solid var(--border);border-radius:6px;overflow:hidden;"><div style="padding:8px 12px;background:var(--navy);color:#fff;font-size:11.5px;font-weight:500;">Scanned Document</div><div style="padding:0;max-height:200px;overflow:hidden;background:#525659;display:flex;align-items:center;justify-content:center;" id="miniPreviewImg"></div></div>
              <div style="display:flex;flex-direction:column;gap:8px;">
                <button class="btn btn-success" onclick="saveToSystem()" style="justify-content:center;"><svg width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg>Save to Procurement System</button>
                <button class="btn btn-secondary" style="justify-content:center;" onclick="resetOcr()"><svg width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><polyline points="1 4 1 10 7 10"/><path d="M3.51 15a9 9 0 102.13-9.36L1 10"/></svg>Scan Another Document</button>
              </div>
            </div>
          </div>
          <div id="lineItemsSection" style="margin-top:20px;display:none;">
            <div style="font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--text-muted);border-bottom:1px solid var(--border);padding-bottom:8px;margin-bottom:12px;">Extracted Line Items</div>
            <div style="overflow-x:auto;"><table class="line-items-table" id="lineItemsTable"><thead><tr><th>#</th><th>Description</th><th>Qty</th><th>Unit</th><th>Unit Price</th><th>VAT</th><th>Line Total</th><th>Flag</th></tr></thead><tbody id="lineItemsBody"></tbody><tfoot id="lineItemsFoot"></tfoot></table></div>
          </div>
        </div>
      </div>
    </div>
    <div class="panel">
      <div class="panel-header"><div class="panel-title">Recent OCR Processing History</div><button class="btn btn-secondary btn-sm" onclick="showToast('Viewing all OCR history...','info')">View All</button></div>
      <table class="data-table">
        <thead><tr><th>Scan ID</th><th>Document Type</th><th>Supplier</th><th>Amount</th><th>Confidence</th><th>Processed By</th><th>Date</th><th>Status</th><th></th></tr></thead>
        <tbody>
          <tr><td class="id-cell">OCR-2026-0094</td><td><span class="history-badge hb-invoice">Invoice</span></td><td style="font-weight:500">Datacom Solutions</td><td class="mono">R 124,500</td><td><span style="color:var(--green);font-weight:700;font-family:'IBM Plex Mono',monospace;">98%</span></td><td style="font-size:12px;color:var(--text-muted)">T. Molefe</td><td style="font-size:12px;color:var(--text-muted)">26 Feb 2026</td><td><span class="status status-approved">Saved</span></td><td><button class="btn btn-secondary btn-xs" onclick="reviewOcrDocument('OCR-2026-0094')">Review</button></td></tr>
          <tr><td class="id-cell">OCR-2026-0093</td><td><span class="history-badge hb-delivery">Delivery Note</span></td><td style="font-weight:500">BuildRight Ltd</td><td class="mono">—</td><td><span style="color:var(--orange);font-weight:700;font-family:'IBM Plex Mono',monospace;">74%</span></td><td style="font-size:12px;color:var(--text-muted)">S. Dlamini</td><td style="font-size:12px;color:var(--text-muted)">25 Feb 2026</td><td><span class="status status-pending">Needs Review</span></td><td><button class="btn btn-secondary btn-xs" onclick="reviewOcrDocument('OCR-2026-0093')">Review</button></td></tr>
          <tr><td class="id-cell">OCR-2026-0092</td><td><span class="history-badge hb-po">Purchase Order</span></td><td style="font-weight:500">TechServ Group</td><td class="mono">R 290,000</td><td><span style="color:var(--green);font-weight:700;font-family:'IBM Plex Mono',monospace;">96%</span></td><td style="font-size:12px;color:var(--text-muted)">T. Molefe</td><td style="font-size:12px;color:var(--text-muted)">25 Feb 2026</td><td><span class="status status-approved">Saved</span></td><td><button class="btn btn-secondary btn-xs" onclick="reviewOcrDocument('OCR-2026-0092')">Review</button></td></tr>
          <tr><td class="id-cell">OCR-2026-0091</td><td><span class="history-badge hb-quote">Quotation</span></td><td style="font-weight:500">Apex Stationery</td><td class="mono">R 8,200</td><td><span style="color:var(--green);font-weight:700;font-family:'IBM Plex Mono',monospace;">99%</span></td><td style="font-size:12px;color:var(--text-muted)">N. Khumalo</td><td style="font-size:12px;color:var(--text-muted)">24 Feb 2026</td><td><span class="status status-approved">Saved</span></td><td><button class="btn btn-secondary btn-xs" onclick="reviewOcrDocument('OCR-2026-0091')">Review</button></td></tr>
        </tbody>
      </table>
    </div>
  </div>
</section>

<!-- ═══════════════════════════════════════════════════════════════
     SECTION 6: INVOICES (Placeholder)
════════════════════════════════════════════════════════════════ -->
<section class="page" id="invoices">
  <div class="topbar">
    <div class="topbar-left"><div class="topbar-title">Invoices</div><div class="topbar-breadcrumb">Finance &rsaquo; <span>Invoice Management</span></div></div>
    <div class="topbar-actions"><button class="btn btn-primary btn-sm" onclick="uploadInvoice()">+ Upload Invoice</button></div>
  </div>
  <div class="page-body">
    <div class="kpi-row">
      <div class="kpi-card blue"><div class="kpi-label">Total Invoices MTD</div><div class="kpi-value">R 2.1M</div><div class="kpi-delta"><span class="up">↑ 8%</span> vs last month</div></div>
      <div class="kpi-card green"><div class="kpi-label">Paid</div><div class="kpi-value">47</div><div class="kpi-delta">On time</div></div>
      <div class="kpi-card gold"><div class="kpi-label">Pending Payment</div><div class="kpi-value">12</div><div class="kpi-delta">Awaiting approval</div></div>
      <div class="kpi-card red"><div class="kpi-label">Overdue</div><div class="kpi-value">3</div><div class="kpi-delta"><span class="dn">Action required</span></div></div>
    </div>
    <div class="panel">
      <div class="panel-header"><div class="panel-title">Invoice Register</div><button class="btn btn-secondary btn-sm" onclick="exportData('Invoices')">Export</button></div>
      <table class="data-table">
        <thead><tr><th>Invoice #</th><th>Supplier</th><th>PO Reference</th><th>Amount</th><th>Due Date</th><th>Status</th><th></th></tr></thead>
        <tbody>
          <tr><td class="id-cell">INV-2026-0847</td><td>Datacom Solutions</td><td class="mono">PO-2026-0412</td><td class="amount-cell">R 124,500</td><td>15 Mar 2026</td><td><span class="status status-approved">Paid</span></td><td><button class="btn btn-secondary btn-xs" onclick="viewInvoice('INV-2026-0847')">View</button></td></tr>
          <tr><td class="id-cell">INV-2026-0846</td><td>TechServ Group</td><td class="mono">PO-2026-0409</td><td class="amount-cell">R 290,000</td><td>20 Mar 2026</td><td><span class="status status-pending">Pending</span></td><td><button class="btn btn-secondary btn-xs" onclick="viewInvoice('INV-2026-0846')">View</button></td></tr>
          <tr><td class="id-cell">INV-2026-0845</td><td>BuildRight Ltd</td><td class="mono">PO-2026-0410</td><td class="amount-cell">R 56,000</td><td>10 Mar 2026</td><td><span class="status status-active">Processing</span></td><td><button class="btn btn-secondary btn-xs" onclick="viewInvoice('INV-2026-0845')">View</button></td></tr>
          <tr><td class="id-cell">INV-2026-0844</td><td>Apex Stationery</td><td class="mono">PO-2026-0411</td><td class="amount-cell">R 8,200</td><td>25 Feb 2026</td><td><span class="status status-rejected">Overdue</span></td><td><button class="btn btn-secondary btn-xs" onclick="viewInvoice('INV-2026-0844')">View</button></td></tr>
        </tbody>
      </table>
    </div>
  </div>
</section>

<!-- ═══════════════════════════════════════════════════════════════
     SECTION 7: BUDGET CONTROL (Placeholder)
════════════════════════════════════════════════════════════════ -->
<section class="page" id="budget">
  <div class="topbar">
    <div class="topbar-left"><div class="topbar-title">Budget Control</div><div class="topbar-breadcrumb">Finance &rsaquo; <span>Budget Management</span></div></div>
    <div class="topbar-actions"><button class="btn btn-secondary btn-sm" onclick="downloadReport('Budget')">Download Report</button></div>
  </div>
  <div class="page-body">
    <div class="kpi-row">
      <div class="kpi-card blue"><div class="kpi-label">Total Budget FY</div><div class="kpi-value">R 12.5M</div><div class="kpi-delta">FY 2025/2026</div></div>
      <div class="kpi-card green"><div class="kpi-label">Spent YTD</div><div class="kpi-value">R 4.2M</div><div class="kpi-delta">33.6% utilized</div></div>
      <div class="kpi-card gold"><div class="kpi-label">Committed</div><div class="kpi-value">R 1.8M</div><div class="kpi-delta">In progress POs</div></div>
      <div class="kpi-card green"><div class="kpi-label">Available</div><div class="kpi-value">R 6.5M</div><div class="kpi-delta">52% remaining</div></div>
    </div>
    <div class="grid-2">
      <div class="panel">
        <div class="panel-header"><div class="panel-title">Budget by Department</div></div>
        <div class="panel-body">
          <div class="progress-list">
            <div class="progress-row"><div class="progress-label-row"><span class="progress-label">ICT Directorate</span><span class="progress-pct" style="color:var(--orange)">85%</span></div><div class="progress-track"><div class="progress-fill fill-orange" style="width:85%"></div></div></div>
            <div class="progress-row"><div class="progress-label-row"><span class="progress-label">Administration</span><span class="progress-pct" style="color:var(--blue)">62%</span></div><div class="progress-track"><div class="progress-fill fill-blue" style="width:62%"></div></div></div>
            <div class="progress-row"><div class="progress-label-row"><span class="progress-label">Human Resources</span><span class="progress-pct" style="color:var(--green)">41%</span></div><div class="progress-track"><div class="progress-fill fill-green" style="width:41%"></div></div></div>
            <div class="progress-row"><div class="progress-label-row"><span class="progress-label">Operations</span><span class="progress-pct" style="color:var(--green)">38%</span></div><div class="progress-track"><div class="progress-fill fill-green" style="width:38%"></div></div></div>
            <div class="progress-row"><div class="progress-label-row"><span class="progress-label">Finance</span><span class="progress-pct" style="color:var(--green)">29%</span></div><div class="progress-track"><div class="progress-fill fill-green" style="width:29%"></div></div></div>
          </div>
        </div>
      </div>
      <div class="panel">
        <div class="panel-header"><div class="panel-title">Budget by Category</div></div>
        <div class="panel-body">
          <div class="progress-list">
            <div class="progress-row"><div class="progress-label-row"><span class="progress-label">IT & Technology</span><span class="progress-pct" style="color:var(--blue)">78%</span></div><div class="progress-track"><div class="progress-fill fill-blue" style="width:78%"></div></div></div>
            <div class="progress-row"><div class="progress-label-row"><span class="progress-label">Professional Services</span><span class="progress-pct" style="color:var(--orange)">91%</span></div><div class="progress-track"><div class="progress-fill fill-orange" style="width:91%"></div></div></div>
            <div class="progress-row"><div class="progress-label-row"><span class="progress-label">Facilities</span><span class="progress-pct" style="color:var(--green)">62%</span></div><div class="progress-track"><div class="progress-fill fill-green" style="width:62%"></div></div></div>
            <div class="progress-row"><div class="progress-label-row"><span class="progress-label">Office Supplies</span><span class="progress-pct" style="color:var(--green)">45%</span></div><div class="progress-track"><div class="progress-fill fill-green" style="width:45%"></div></div></div>
            <div class="progress-row"><div class="progress-label-row"><span class="progress-label">Security</span><span class="progress-pct" style="color:var(--green)">57%</span></div><div class="progress-track"><div class="progress-fill fill-green" style="width:57%"></div></div></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- ═══════════════════════════════════════════════════════════════
     SECTION 8: ANALYTICS (Placeholder)
════════════════════════════════════════════════════════════════ -->
<section class="page" id="analytics">
  <div class="topbar">
    <div class="topbar-left"><div class="topbar-title">Analytics</div><div class="topbar-breadcrumb">Reports &rsaquo; <span>Procurement Analytics</span></div></div>
    <div class="topbar-actions"><button class="btn btn-secondary btn-sm" onclick="downloadReport('Analytics')">Export Report</button></div>
  </div>
  <div class="page-body">
    <div class="placeholder-content">
      <div class="placeholder-icon"><svg width="40" height="40" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/></svg></div>
      <div class="placeholder-title">Analytics Dashboard</div>
      <div class="placeholder-desc">Advanced procurement analytics and reporting capabilities coming soon. Track spend patterns, supplier performance, and procurement efficiency metrics.</div>
      <div style="margin-top:20px;display:flex;gap:12px;">
        <button class="btn btn-primary btn-sm" onclick="requestEarlyAccess()">Request Early Access</button>
        <button class="btn btn-secondary btn-sm" onclick="learnMore('Analytics Dashboard')">Learn More</button>
      </div>
    </div>
  </div>
</section>

</main>

<!-- ═══════════════════════════════════════════════════════════════
     JAVASCRIPT
════════════════════════════════════════════════════════════════ -->
<script>
// ── NAVIGATION ──
function showPage(id, navEl) {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  if (navEl) navEl.classList.add('active');
  updateBreadcrumb(id);
  window.scrollTo(0, 0);
}

function updateBreadcrumb(id) {
  const titles = {
    'dashboard': 'Dashboard',
    'requisitions': 'Purchase Requisitions',
    'tenders': 'Bidding & Tenders',
    'suppliers': 'Supplier Management',
    'ocr-scan': 'Intelligent Document Scan',
    'invoices': 'Invoices',
    'budget': 'Budget Control',
    'analytics': 'Analytics'
  };
  const el = document.getElementById('breadcrumb-text');
  if (el) el.textContent = titles[id] || 'Dashboard';
}

// ── TAB SWITCHING ──
function switchTab(tabEl, tabBarId) {
  const tabBar = document.getElementById(tabBarId);
  tabBar.querySelectorAll('.tab-item').forEach(t => t.classList.remove('active'));
  tabEl.classList.add('active');
}

// ── DOC TYPE SELECTION ──
let selectedDocType = 'invoice';
function selectDocType(btn, type) {
  selectedDocType = type;
  document.querySelectorAll('.doc-type-chip').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
}

// ── FILE HANDLING ──
let uploadedFile = null;
let uploadedBase64 = null;
let uploadedMimeType = null;

function handleDrop(event) {
  event.preventDefault();
  document.getElementById('dropZone').classList.remove('dragover');
  const file = event.dataTransfer.files[0];
  if (file) processFile(file);
}

function handleFileSelect(event) {
  const file = event.target.files[0];
  if (file) processFile(file);
}

function processFile(file) {
  uploadedFile = file;
  const dropZone = document.getElementById('dropZone');
  dropZone.classList.add('has-file');
  document.getElementById('dropIcon').innerHTML = '<svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg>';
  document.getElementById('dropIcon').style.background = 'var(--green-bg)';
  document.getElementById('dropIcon').style.color = 'var(--green)';
  document.getElementById('dropTitle').textContent = file.name;
  document.getElementById('dropSub').textContent = (file.size/1024).toFixed(1) + ' KB · Click to change';

  const preview = document.getElementById('docPreview');
  preview.style.display = 'block';
  document.getElementById('previewFilename').textContent = file.name;
  document.getElementById('previewSize').textContent = (file.size/1024).toFixed(1) + ' KB';

  const reader = new FileReader();
  reader.onload = (e) => {
    const dataUrl = e.target.result;
    uploadedBase64 = dataUrl.split(',')[1];
    uploadedMimeType = file.type || 'image/jpeg';
    if (file.type.startsWith('image/')) {
      document.getElementById('previewBody').innerHTML = '<img src="' + dataUrl + '" alt="Preview" />';
    } else {
      document.getElementById('previewBody').innerHTML = '<div style="padding:60px 20px;text-align:center;color:#ccc;font-size:12px;">PDF document loaded</div>';
    }
  };
  reader.readAsDataURL(file);

  document.getElementById('processBtn').disabled = false;
  addLog('info', 'File loaded: ' + file.name);
  addLog('info', 'Document type: ' + (selectedDocType === 'auto' ? 'Auto-detect' : selectedDocType));
  addLog('info', 'Ready to process.');
}

// ── LOGGING ──
function addLog(type, message) {
  const log = document.getElementById('ocrLog');
  const now = new Date();
  const time = now.toTimeString().slice(0,8);
  const div = document.createElement('div');
  div.className = 't-line';
  div.innerHTML = '<span class="t-time">' + time + '</span><span class="t-' + (type === 'success' ? 'ok' : type === 'error' ? 'err' : type === 'warn' ? 'warn' : 'info') + '">' + message + '</span>';
  // Remove cursor from previous line
  const cursor = log.querySelector('.t-cursor');
  if (cursor) cursor.remove();
  log.appendChild(div);
  log.scrollTop = log.scrollHeight;
}

// ── STEP PROGRESSION ──
function setStep(stepId, state) {
  const step = document.getElementById(stepId);
  const badge = step.querySelector('.step-badge');
  // Remove old classes
  step.classList.remove('pending', 'current', 'done');
  badge.classList.remove('pending', 'current', 'done');
  // Add new state
  step.classList.add(state);
  badge.classList.add(state);
  // Update badge content
  if (state === 'done') {
    badge.innerHTML = '✓';
  } else if (state === 'current') {
    badge.innerHTML = badge.textContent.replace('✓', step.id.split('-')[1] === 'upload' ? '1' : step.id.split('-')[1] === 'preprocess' ? '2' : step.id.split('-')[1] === 'vision' ? '3' : step.id.split('-')[1] === 'parse' ? '4' : '5');
  }
  // Add/remove spinner
  const existingSpinner = step.querySelector('.step-spinner');
  if (existingSpinner) existingSpinner.remove();
  if (state === 'current') {
    const spinner = document.createElement('div');
    spinner.className = 'step-spinner';
    step.appendChild(spinner);
  }
}

function resetSteps() {
  ['step-upload', 'step-preprocess', 'step-vision', 'step-parse', 'step-validate'].forEach((id, i) => {
    const step = document.getElementById(id);
    const badge = step.querySelector('.step-badge');
    step.classList.remove('pending', 'current', 'done');
    step.classList.add('pending');
    badge.classList.remove('pending', 'current', 'done');
    badge.classList.add('pending');
    badge.innerHTML = (i + 1).toString();
    const spinner = step.querySelector('.step-spinner');
    if (spinner) spinner.remove();
  });
}

// ── OCR PROCESSING ──
async function processOCR() {
  if (!uploadedBase64) return;

  document.getElementById('processBtn').disabled = true;
  document.getElementById('logStatus').style.display = 'inline-flex';
  document.getElementById('resultsSection').style.display = 'none';
  document.getElementById('scanBeam').style.display = 'block';
  document.getElementById('stepsPanel').style.display = 'block';

  resetSteps();
  addLog('info', 'Initiating AI OCR processing…');

  // Step 1: Upload
  setStep('step-upload', 'current');
  addLog('info', 'Document received and queued…');

  await delay(400);
  setStep('step-upload', 'done');

  // Step 2: Pre-process
  setStep('step-preprocess', 'current');
  addLog('info', 'Enhancing image quality…');

  await delay(500);
  setStep('step-preprocess', 'done');

  // Step 3: Vision Analysis
  setStep('step-vision', 'current');
  addLog('info', 'Sending to Claude vision API…');
  addLog('info', 'Extracting text and structure…');

  await delay(800);
  setStep('step-vision', 'done');

  // Step 4: Parse Data
  setStep('step-parse', 'current');
  addLog('info', 'Parsing extracted data…');
  addLog('info', 'Mapping to procurement fields…');

  await delay(500);
  setStep('step-parse', 'done');

  // Step 5: Validate
  setStep('step-validate', 'current');
  addLog('info', 'Running business rule validation…');

  await delay(400);
  setStep('step-validate', 'done');

  document.getElementById('scanBeam').style.display = 'none';
  addLog('success', 'Document processed successfully.');
  addLog('info', 'Overall confidence: 96%');

  renderResults(getDemoData());
  document.getElementById('logStatus').style.display = 'none';
  document.getElementById('processBtn').disabled = false;
}

function delay(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}

// ── DEMO DATA ──
function getDemoData() {
  return {
    docType: "invoice",
    confidence: 0.96,
    supplier: { name: "Datacom Solutions (Pty) Ltd", vatNumber: "4620183751", companyReg: "2018/043721/07", address: "14 Electron Avenue, Technopark, Pretoria", email: "accounts@datacom.co.za", accountNumber: "62843917024", branchCode: "251345" },
    document: { number: "INV-2026-00412", date: "2026-02-24", dueDate: "2026-03-26", poReference: "PO-2026-0412", paymentTerms: "30 days net" },
    buyer: { name: "Department of Public Works", department: "ICT Directorate" },
    lineItems: [
      { description: "Dell Latitude 5540 Laptop (i5, 16GB, 512GB)", quantity: 15, unit: "EA", unitPrice: 18500, vatPercent: 15, lineTotal: 277500, flagged: false },
      { description: "Dell USB-C Dock WD19S 180W", quantity: 15, unit: "EA", unitPrice: 2400, vatPercent: 15, lineTotal: 36000, flagged: false },
      { description: "Logitech MX Master 3 Wireless Mouse", quantity: 20, unit: "EA", unitPrice: 850, vatPercent: 15, lineTotal: 17000, flagged: true, flagReason: "Qty exceeds PO by 5" }
    ],
    totals: { subtotal: 334100, vatAmount: 50115, grandTotal: 384215 },
    validationFlags: [
      { type: "pass", message: "Supplier VAT number verified" },
      { type: "pass", message: "Invoice matches PO reference" },
      { type: "warn", message: "Line item 3 qty exceeds PO" },
      { type: "pass", message: "VAT calculation correct (15%)" }
    ]
  };
}

// ── RENDER RESULTS ──
function renderResults(data) {
  const conf = Math.round((data.confidence || 0.9) * 100);

  // Animate confidence ring
  const circumference = 2 * Math.PI * 30;
  const offset = circumference - (conf / 100) * circumference;
  document.getElementById('confRingFill').style.strokeDashoffset = offset;
  document.getElementById('confRingFill').style.stroke = conf >= 90 ? 'var(--green)' : conf >= 70 ? 'var(--orange)' : 'var(--red)';
  document.getElementById('confRingText').textContent = conf + '%';

  const typeMap = { invoice: 'Invoice', purchase_order: 'Purchase Order', delivery_note: 'Delivery Note', quotation: 'Quotation', contract: 'Contract' };
  document.getElementById('resultDocType').textContent = typeMap[data.docType] || 'Document';

  // Header fields
  const fields = [
    { label: 'Document Number', value: data.document?.number || '', conf: 'high' },
    { label: 'Document Date', value: data.document?.date || '', conf: 'high' },
    { label: 'Due Date', value: data.document?.dueDate || '', conf: 'high' },
    { label: 'PO Reference', value: data.document?.poReference || '', conf: 'high' },
    { label: 'Supplier Name', value: data.supplier?.name || '', conf: 'high' },
    { label: 'Supplier VAT No.', value: data.supplier?.vatNumber || '', conf: 'high' },
    { label: 'Supplier Email', value: data.supplier?.email || '', conf: 'med' },
    { label: 'Bank Account', value: data.supplier?.accountNumber || '', conf: 'high' }
  ];

  const confMap = { high: { label: '98%', cls: 'conf-high' }, med: { label: '82%', cls: 'conf-med' }, low: { label: '61%', cls: 'conf-low' } };
  document.getElementById('extractedFields').innerHTML = fields.map(f =>
    '<div class="field-row"><div class="field-label">' + f.label + '</div><div class="field-input-wrap"><input type="text" value="' + (f.value || '') + '" placeholder="Not detected" /><span class="field-confidence ' + confMap[f.conf].cls + '">' + confMap[f.conf].label + '</span></div></div>'
  ).join('');

  // Line items
  if (data.lineItems && data.lineItems.length > 0) {
    document.getElementById('lineItemsSection').style.display = 'block';
    document.getElementById('lineItemsBody').innerHTML = data.lineItems.map((item, i) =>
      '<tr class="' + (item.flagged ? 'flagged' : '') + '"><td style="color:var(--text-muted);font-size:11px;">' + (i+1) + '</td><td><input type="text" value="' + item.description + '" style="min-width:180px;" /></td><td><input type="text" value="' + item.quantity + '" style="width:50px;" /></td><td><input type="text" value="' + item.unit + '" style="width:40px;" /></td><td><input type="text" value="R ' + item.unitPrice.toLocaleString() + '" style="width:90px;" /></td><td>' + item.vatPercent + '%</td><td style="font-weight:600;font-family:\'IBM Plex Mono\',monospace;">R ' + item.lineTotal.toLocaleString() + '</td><td>' + (item.flagged ? '<span style="font-size:10px;color:var(--red);font-weight:600;">⚠</span>' : '<span style="color:var(--green);">✓</span>') + '</td></tr>'
    ).join('');

    const t = data.totals || {};
    document.getElementById('lineItemsFoot').innerHTML = '<tr class="totals-row"><td colspan="6" style="text-align:right;">Subtotal</td><td class="mono">R ' + (t.subtotal || 0).toLocaleString() + '</td><td></td></tr><tr class="totals-row"><td colspan="6" style="text-align:right;">VAT (15%)</td><td class="mono">R ' + (t.vatAmount || 0).toLocaleString() + '</td><td></td></tr><tr style="background:var(--navy);"><td colspan="6" style="text-align:right;color:#fff;font-weight:700;">TOTAL</td><td style="color:var(--accent);font-weight:700;font-family:\'IBM Plex Mono\',monospace;">R ' + (t.grandTotal || 0).toLocaleString() + '</td><td style="background:var(--navy);"></td></tr>';
  }

  // Validation
  if (data.validationFlags && data.validationFlags.length > 0) {
    document.getElementById('validationPanel').style.display = 'block';
    const icons = { pass: '<svg width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg>', warn: '<svg width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>', fail: '<svg width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg>' };
    document.getElementById('validationList').innerHTML = data.validationFlags.map(f => '<div class="validation-item ' + f.type + '">' + (icons[f.type] || icons.warn) + '<span>' + f.message + '</span></div>').join('');
  }

  // Mini preview
  const previewImg = document.getElementById('previewBody').innerHTML;
  document.getElementById('miniPreviewImg').innerHTML = previewImg;

  document.getElementById('resultsSection').style.display = 'block';
  document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth', block: 'start' });
}

function saveToSystem() {
  addLog('success', 'Document saved to procurement system.');
  document.getElementById('resultStatus').textContent = 'Saved';
  document.getElementById('resultStatus').className = 'status status-approved';
  alert('Document saved to GovProcure system successfully.');
}

function resetOcr() {
  uploadedFile = null;
  uploadedBase64 = null;
  document.getElementById('dropZone').classList.remove('has-file','dragover');
  document.getElementById('dropIcon').innerHTML = '<svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>';
  document.getElementById('dropIcon').style.background = 'var(--blue-bg)';
  document.getElementById('dropIcon').style.color = 'var(--blue)';
  document.getElementById('dropTitle').textContent = 'Drag & drop your document here';
  document.getElementById('dropSub').textContent = 'Or click to browse your files. Scanned PDFs, photos of documents, and image files are all supported.';
  document.getElementById('docPreview').style.display = 'none';
  document.getElementById('processBtn').disabled = true;
  document.getElementById('resultsSection').style.display = 'none';
  document.getElementById('validationPanel').style.display = 'none';
  document.getElementById('lineItemsSection').style.display = 'none';
  document.getElementById('scanBeam').style.display = 'none';
  document.getElementById('stepsPanel').style.display = 'none';
  resetSteps();
  document.getElementById('fileInput').value = '';
  document.getElementById('ocrLog').innerHTML = '<div class="t-line"><span class="t-time">--:--:--</span><span class="t-info">System ready. Awaiting document upload…</span><span class="t-cursor"></span></div>';
  // Reset confidence ring
  document.getElementById('confRingFill').style.strokeDashoffset = 188.5;
  document.getElementById('confRingText').textContent = '0%';
}

// ── MODAL SYSTEM ──
function showModal(title, content, buttons = []) {
  // Remove existing modal
  const existing = document.getElementById('appModal');
  if (existing) existing.remove();

  const modal = document.createElement('div');
  modal.id = 'appModal';
  modal.style.cssText = 'position:fixed;inset:0;background:rgba(13,33,69,0.6);backdrop-filter:blur(4px);z-index:9999;display:flex;align-items:center;justify-content:center;animation:fadeIn 0.2s ease;';

  let buttonsHtml = buttons.map(b =>
    `<button class="btn ${b.class || 'btn-secondary'}" onclick="${b.action}">${b.label}</button>`
  ).join('');
  if (buttons.length === 0) {
    buttonsHtml = '<button class="btn btn-primary" onclick="closeModal()">OK</button>';
  }

  modal.innerHTML = `
    <div style="background:var(--surface);border-radius:8px;box-shadow:var(--shadow-lg);max-width:500px;width:90%;max-height:80vh;overflow:hidden;">
      <div style="padding:16px 20px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;">
        <div style="font-family:'Playfair Display',serif;font-size:16px;color:var(--navy);font-weight:600;">${title}</div>
        <div style="cursor:pointer;color:var(--text-muted);font-size:20px;line-height:1;" onclick="closeModal()">×</div>
      </div>
      <div style="padding:20px;max-height:50vh;overflow-y:auto;">${content}</div>
      <div style="padding:14px 20px;border-top:1px solid var(--border);background:var(--surface2);display:flex;justify-content:flex-end;gap:8px;">${buttonsHtml}</div>
    </div>`;

  document.body.appendChild(modal);
  modal.onclick = (e) => { if (e.target === modal) closeModal(); };
}

function closeModal() {
  const modal = document.getElementById('appModal');
  if (modal) modal.remove();
}

// ── TOAST NOTIFICATIONS ──
function showToast(message, type = 'info') {
  const colors = {
    success: 'var(--green)',
    error: 'var(--red)',
    warning: 'var(--orange)',
    info: 'var(--blue)'
  };

  const toast = document.createElement('div');
  toast.style.cssText = `position:fixed;bottom:24px;right:24px;background:var(--navy);color:#fff;padding:12px 20px;border-radius:6px;box-shadow:var(--shadow-lg);z-index:10000;display:flex;align-items:center;gap:10px;font-size:13px;animation:fadeIn 0.2s ease;border-left:3px solid ${colors[type]};`;
  toast.innerHTML = `<span>${message}</span>`;
  document.body.appendChild(toast);

  setTimeout(() => {
    toast.style.opacity = '0';
    toast.style.transition = 'opacity 0.3s';
    setTimeout(() => toast.remove(), 300);
  }, 3000);
}

// ── DASHBOARD ACTIONS ──
function reviewPendingItems() {
  showModal('Pending Items for Review', `
    <div style="display:flex;flex-direction:column;gap:12px;">
      <div style="padding:12px;background:var(--orange-bg);border-radius:6px;display:flex;justify-content:space-between;align-items:center;">
        <div><strong>REQ-2026-441</strong> — Laptops ×10<br><span style="font-size:11px;color:var(--text-muted)">Submitted by T. Molefe</span></div>
        <button class="btn btn-sm btn-primary" onclick="approveItem('REQ-2026-441')">Approve</button>
      </div>
      <div style="padding:12px;background:var(--orange-bg);border-radius:6px;display:flex;justify-content:space-between;align-items:center;">
        <div><strong>TND-2026-006</strong> — Office Furniture<br><span style="font-size:11px;color:var(--text-muted)">Closes 27 Feb 2026</span></div>
        <button class="btn btn-sm btn-secondary" onclick="closeModal();showPage('tenders',null)">View Tender</button>
      </div>
      <div style="padding:12px;background:var(--orange-bg);border-radius:6px;display:flex;justify-content:space-between;align-items:center;">
        <div><strong>TND-2026-007</strong> — ERP Implementation<br><span style="font-size:11px;color:var(--text-muted)">Closes 28 Feb 2026</span></div>
        <button class="btn btn-sm btn-secondary" onclick="closeModal();showPage('tenders',null)">View Tender</button>
      </div>
    </div>
  `);
}

function approveItem(id) {
  closeModal();
  showToast(id + ' has been approved successfully.', 'success');
}

function exportData(type) {
  showToast('Preparing ' + type + ' export...', 'info');
  setTimeout(() => {
    showToast(type + ' exported successfully. Check your downloads folder.', 'success');
  }, 1500);
}

function viewPurchaseOrder(poId) {
  const poData = {
    'PO-2026-0412': { supplier: 'Datacom Solutions', amount: 'R 124,500.00', items: '20× Dell Latitude 5540 Laptops', status: 'Approved', date: '24 Feb 2026' },
    'PO-2026-0411': { supplier: 'Apex Stationery', amount: 'R 8,200.00', items: 'Monthly stationery replenishment', status: 'Pending', date: '23 Feb 2026' },
    'PO-2026-0410': { supplier: 'BuildRight Ltd', amount: 'R 56,000.00', items: 'Air-conditioning unit installation', status: 'In Transit', date: '22 Feb 2026' },
    'PO-2026-0409': { supplier: 'TechServ Group', amount: 'R 290,000.00', items: 'Network security audit Q1', status: 'Approved', date: '21 Feb 2026' },
    'PO-2026-0408': { supplier: 'QuickPrint ZA', amount: 'R 14,800.00', items: 'Annual report printing batch', status: 'Rejected', date: '20 Feb 2026' }
  };
  const po = poData[poId] || { supplier: 'Unknown', amount: 'N/A', items: 'N/A', status: 'Unknown', date: 'N/A' };

  showModal('Purchase Order: ' + poId, `
    <div style="display:flex;flex-direction:column;gap:12px;">
      <div class="field-row" style="padding:8px 0;"><div class="field-label" style="width:120px;">Supplier</div><div style="font-weight:500;">${po.supplier}</div></div>
      <div class="field-row" style="padding:8px 0;"><div class="field-label" style="width:120px;">Amount</div><div style="font-family:'IBM Plex Mono',monospace;font-weight:600;">${po.amount}</div></div>
      <div class="field-row" style="padding:8px 0;"><div class="field-label" style="width:120px;">Description</div><div>${po.items}</div></div>
      <div class="field-row" style="padding:8px 0;"><div class="field-label" style="width:120px;">Issue Date</div><div>${po.date}</div></div>
      <div class="field-row" style="padding:8px 0;border:none;"><div class="field-label" style="width:120px;">Status</div><div><span class="status status-${po.status.toLowerCase().replace(' ','-')}">${po.status}</span></div></div>
    </div>
  `, [
    { label: 'Print', class: 'btn-secondary', action: "showToast('Printing PO...','info');closeModal()" },
    { label: 'Download PDF', class: 'btn-primary', action: "exportData('Purchase Order');closeModal()" }
  ]);
}

// ── REQUISITION ACTIONS ──
function createNewRequisition() {
  showPage('requisitions', document.querySelectorAll('.nav-item')[2]);
  showToast('New requisition form loaded.', 'info');
}

function saveRequisitionDraft() {
  showToast('Requisition saved as draft.', 'success');
}

function submitRequisition() {
  showModal('Submit Requisition', `
    <p style="margin-bottom:16px;">You are about to submit requisition <strong>REQ-2026-442</strong> for approval.</p>
    <p style="color:var(--text-muted);font-size:12.5px;">This will notify your line manager (S. Dlamini) and start the approval workflow.</p>
  `, [
    { label: 'Cancel', class: 'btn-secondary', action: 'closeModal()' },
    { label: 'Submit for Approval', class: 'btn-primary', action: "closeModal();showToast('Requisition submitted successfully!','success')" }
  ]);
}

// ── TENDER ACTIONS ──
function createTender() {
  showModal('Create New Tender', `
    <div class="form-grid" style="gap:14px;">
      <div class="form-group span2"><label>Tender Title</label><input type="text" placeholder="Enter tender title..." /></div>
      <div class="form-group"><label>Tender Type</label><select><option>RFP - Request for Proposal</option><option>RFQ - Request for Quotation</option><option>RFI - Request for Information</option></select></div>
      <div class="form-group"><label>Estimated Value (ZAR)</label><input type="number" placeholder="0.00" /></div>
      <div class="form-group"><label>Closing Date</label><input type="date" /></div>
      <div class="form-group"><label>Category</label><select><option>IT & Software</option><option>Facilities</option><option>Professional Services</option><option>Security Services</option></select></div>
      <div class="form-group span2"><label>Description</label><textarea placeholder="Enter tender description..." style="min-height:80px;"></textarea></div>
    </div>
  `, [
    { label: 'Cancel', class: 'btn-secondary', action: 'closeModal()' },
    { label: 'Create Tender', class: 'btn-primary', action: "closeModal();showToast('Tender created successfully!','success')" }
  ]);
}

function downloadTenderDoc(tenderId, docType) {
  showToast('Downloading ' + docType + ' for ' + tenderId + '...', 'info');
  setTimeout(() => showToast('Document downloaded successfully.', 'success'), 1500);
}

function evaluateBids(tenderId) {
  showModal('Evaluate Bids: ' + tenderId, `
    <p style="margin-bottom:16px;">6 bids received for this tender. Select a bid to review:</p>
    <div style="display:flex;flex-direction:column;gap:8px;">
      <div style="padding:12px;background:var(--surface2);border:1px solid var(--border);border-radius:6px;display:flex;justify-content:space-between;align-items:center;cursor:pointer;" onclick="showToast('Opening bid from SAP Africa...','info');closeModal()">
        <div><strong>SAP Africa (Pty) Ltd</strong><br><span style="font-size:11px;color:var(--text-muted)">R 2,340,000 · Submitted 25 Feb</span></div>
        <span class="risk-pill risk-low">B-BBEE Lvl 1</span>
      </div>
      <div style="padding:12px;background:var(--surface2);border:1px solid var(--border);border-radius:6px;display:flex;justify-content:space-between;align-items:center;cursor:pointer;" onclick="showToast('Opening bid from DataTech...','info');closeModal()">
        <div><strong>DataTech Solutions</strong><br><span style="font-size:11px;color:var(--text-muted)">R 2,150,000 · Submitted 24 Feb</span></div>
        <span class="risk-pill risk-low">B-BBEE Lvl 2</span>
      </div>
      <div style="padding:12px;background:var(--surface2);border:1px solid var(--border);border-radius:6px;display:flex;justify-content:space-between;align-items:center;cursor:pointer;" onclick="showToast('Opening bid from ProcureWise...','info');closeModal()">
        <div><strong>ProcureWise Systems</strong><br><span style="font-size:11px;color:var(--text-muted)">R 2,680,000 · Submitted 23 Feb</span></div>
        <span class="risk-pill risk-med">B-BBEE Lvl 4</span>
      </div>
    </div>
  `);
}

function inviteSuppliers(tenderId) {
  showModal('Invite Suppliers: ' + tenderId, `
    <p style="margin-bottom:16px;">Select suppliers to invite to this tender:</p>
    <div style="display:flex;flex-direction:column;gap:8px;">
      <label style="display:flex;align-items:center;gap:10px;padding:10px;background:var(--surface2);border-radius:4px;cursor:pointer;"><input type="checkbox" /> Datacom Solutions (Preferred)</label>
      <label style="display:flex;align-items:center;gap:10px;padding:10px;background:var(--surface2);border-radius:4px;cursor:pointer;"><input type="checkbox" /> TechServ Group (Preferred)</label>
      <label style="display:flex;align-items:center;gap:10px;padding:10px;background:var(--surface2);border-radius:4px;cursor:pointer;"><input type="checkbox" checked /> BuildRight Ltd</label>
      <label style="display:flex;align-items:center;gap:10px;padding:10px;background:var(--surface2);border-radius:4px;cursor:pointer;"><input type="checkbox" /> Apex Stationery</label>
    </div>
  `, [
    { label: 'Cancel', class: 'btn-secondary', action: 'closeModal()' },
    { label: 'Send Invitations', class: 'btn-accent', action: "closeModal();showToast('Invitations sent to selected suppliers.','success')" }
  ]);
}

function viewTenderDetails(tenderId) {
  showToast('Loading tender details for ' + tenderId + '...', 'info');
  showPage('tenders', null);
}

// ── SUPPLIER ACTIONS ──
function addSupplier() {
  showModal('Register New Supplier', `
    <div class="form-grid" style="gap:14px;">
      <div class="form-group span2"><label>Company Name</label><input type="text" placeholder="Enter company name..." /></div>
      <div class="form-group"><label>CSD Number</label><input type="text" placeholder="e.g. 0041-2887" /></div>
      <div class="form-group"><label>VAT Number</label><input type="text" placeholder="e.g. 4620183751" /></div>
      <div class="form-group"><label>Category</label><select><option>IT Hardware & Software</option><option>Professional Services</option><option>Facilities & Construction</option><option>Office Supplies</option></select></div>
      <div class="form-group"><label>B-BBEE Level</label><select><option>Level 1</option><option>Level 2</option><option>Level 3</option><option>Level 4</option><option>Level 5+</option></select></div>
      <div class="form-group span2"><label>Contact Email</label><input type="email" placeholder="accounts@company.co.za" /></div>
    </div>
  `, [
    { label: 'Cancel', class: 'btn-secondary', action: 'closeModal()' },
    { label: 'Submit for Vetting', class: 'btn-primary', action: "closeModal();showToast('Supplier submitted for CSD verification.','success')" }
  ]);
}

function viewSupplierProfile(name) {
  showModal('Supplier Profile: ' + name, `
    <div style="display:flex;gap:16px;margin-bottom:16px;">
      <div style="width:60px;height:60px;background:var(--blue-bg);border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:20px;font-weight:700;color:var(--blue);">${name.split(' ').map(w=>w[0]).join('').substring(0,2)}</div>
      <div>
        <div style="font-size:16px;font-weight:600;color:var(--navy);">${name}</div>
        <div style="font-size:12px;color:var(--text-muted);margin-top:2px;">IT Hardware & Software</div>
        <div style="margin-top:6px;"><span class="status status-approved">Preferred Supplier</span></div>
      </div>
    </div>
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;">
      <div style="padding:12px;background:var(--surface2);border-radius:6px;"><div style="font-size:10px;color:var(--text-muted);text-transform:uppercase;">Total Spend</div><div style="font-size:18px;font-weight:600;font-family:'IBM Plex Mono',monospace;">R 890,000</div></div>
      <div style="padding:12px;background:var(--surface2);border-radius:6px;"><div style="font-size:10px;color:var(--text-muted);text-transform:uppercase;">On-Time Delivery</div><div style="font-size:18px;font-weight:600;color:var(--green);">98%</div></div>
      <div style="padding:12px;background:var(--surface2);border-radius:6px;"><div style="font-size:10px;color:var(--text-muted);text-transform:uppercase;">Total Orders</div><div style="font-size:18px;font-weight:600;">34</div></div>
      <div style="padding:12px;background:var(--surface2);border-radius:6px;"><div style="font-size:10px;color:var(--text-muted);text-transform:uppercase;">Rating</div><div style="font-size:18px;font-weight:600;color:var(--accent);">★ 5.0</div></div>
    </div>
  `, [
    { label: 'View Orders', class: 'btn-secondary', action: "closeModal();showToast('Loading supplier orders...','info')" },
    { label: 'Contact Supplier', class: 'btn-primary', action: "closeModal();showToast('Opening email client...','info')" }
  ]);
}

function filterItems(section) {
  showModal('Filter ' + section, `
    <div class="form-grid" style="gap:14px;">
      <div class="form-group"><label>Status</label><select><option>All Statuses</option><option>Active</option><option>Pending</option><option>Approved</option><option>Rejected</option></select></div>
      <div class="form-group"><label>Category</label><select><option>All Categories</option><option>IT & Technology</option><option>Professional Services</option><option>Facilities</option><option>Office Supplies</option></select></div>
      <div class="form-group"><label>Date From</label><input type="date" /></div>
      <div class="form-group"><label>Date To</label><input type="date" /></div>
    </div>
  `, [
    { label: 'Clear Filters', class: 'btn-secondary', action: "closeModal();showToast('Filters cleared.','info')" },
    { label: 'Apply Filters', class: 'btn-primary', action: "closeModal();showToast('Filters applied.','success')" }
  ]);
}

// ── INVOICE ACTIONS ──
function uploadInvoice() {
  showModal('Upload Invoice', `
    <div style="border:2px dashed var(--border-strong);border-radius:8px;padding:40px;text-align:center;margin-bottom:16px;cursor:pointer;" onclick="showToast('Opening file browser...','info')">
      <div style="color:var(--blue);margin-bottom:8px;">
        <svg width="32" height="32" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
      </div>
      <div style="font-weight:500;color:var(--navy);">Click to upload or drag & drop</div>
      <div style="font-size:12px;color:var(--text-muted);margin-top:4px;">PDF, JPG, PNG (max 10MB)</div>
    </div>
    <div class="form-group"><label>Link to Purchase Order</label><select><option>— Select PO —</option><option>PO-2026-0412 - Datacom Solutions</option><option>PO-2026-0411 - Apex Stationery</option><option>PO-2026-0410 - BuildRight Ltd</option></select></div>
  `, [
    { label: 'Cancel', class: 'btn-secondary', action: 'closeModal()' },
    { label: 'Process with OCR', class: 'btn-primary', action: "closeModal();showPage('ocr-scan',null);showToast('Redirecting to OCR scanner...','info')" }
  ]);
}

function viewInvoice(invId) {
  showModal('Invoice: ' + invId, `
    <div style="display:flex;flex-direction:column;gap:12px;">
      <div class="field-row" style="padding:8px 0;"><div class="field-label" style="width:120px;">Supplier</div><div style="font-weight:500;">Datacom Solutions</div></div>
      <div class="field-row" style="padding:8px 0;"><div class="field-label" style="width:120px;">PO Reference</div><div class="mono">PO-2026-0412</div></div>
      <div class="field-row" style="padding:8px 0;"><div class="field-label" style="width:120px;">Amount</div><div style="font-family:'IBM Plex Mono',monospace;font-weight:600;">R 124,500.00</div></div>
      <div class="field-row" style="padding:8px 0;"><div class="field-label" style="width:120px;">Due Date</div><div>15 Mar 2026</div></div>
      <div class="field-row" style="padding:8px 0;border:none;"><div class="field-label" style="width:120px;">Status</div><div><span class="status status-approved">Paid</span></div></div>
    </div>
  `, [
    { label: 'Download', class: 'btn-secondary', action: "exportData('Invoice');closeModal()" },
    { label: 'View in OCR', class: 'btn-primary', action: "closeModal();showPage('ocr-scan',null)" }
  ]);
}

// ── BUDGET ACTIONS ──
function downloadReport(reportType) {
  showToast('Generating ' + reportType + ' report...', 'info');
  setTimeout(() => showToast(reportType + ' report downloaded.', 'success'), 2000);
}

// ── ANALYTICS ACTIONS ──
function requestEarlyAccess() {
  showModal('Request Early Access', `
    <p style="margin-bottom:16px;">Enter your details to join the Analytics early access program:</p>
    <div class="form-grid" style="gap:14px;">
      <div class="form-group span2"><label>Full Name</label><input type="text" value="Thabo Molefe" /></div>
      <div class="form-group span2"><label>Email</label><input type="email" value="t.molefe@gov.za" /></div>
      <div class="form-group span2"><label>Department</label><input type="text" value="Procurement" /></div>
    </div>
  `, [
    { label: 'Cancel', class: 'btn-secondary', action: 'closeModal()' },
    { label: 'Submit Request', class: 'btn-primary', action: "closeModal();showToast('Early access request submitted! We\\'ll notify you when Analytics is available.','success')" }
  ]);
}

function learnMore(feature) {
  showModal('About ' + feature, `
    <p style="line-height:1.7;">The <strong>${feature}</strong> module provides comprehensive insights into your procurement operations:</p>
    <ul style="margin:16px 0;padding-left:20px;line-height:1.8;color:var(--text-mid);">
      <li>Spend analysis by category, supplier, and department</li>
      <li>Supplier performance benchmarking</li>
      <li>Budget variance tracking and forecasting</li>
      <li>Procurement cycle time analytics</li>
      <li>Compliance and audit reporting</li>
    </ul>
    <p style="color:var(--text-muted);font-size:12.5px;">Expected release: Q2 2026</p>
  `);
}

// ── OCR HISTORY ACTIONS ──
function reviewOcrDocument(scanId) {
  showToast('Loading document ' + scanId + '...', 'info');
  setTimeout(() => {
    showModal('Review: ' + scanId, `
      <div style="display:flex;gap:16px;margin-bottom:16px;">
        <div style="flex:1;">
          <div style="font-size:11px;color:var(--text-muted);text-transform:uppercase;margin-bottom:4px;">Document Type</div>
          <div><span class="history-badge hb-invoice">Invoice</span></div>
        </div>
        <div style="flex:1;">
          <div style="font-size:11px;color:var(--text-muted);text-transform:uppercase;margin-bottom:4px;">Confidence</div>
          <div style="font-size:18px;font-weight:700;color:var(--green);">98%</div>
        </div>
        <div style="flex:1;">
          <div style="font-size:11px;color:var(--text-muted);text-transform:uppercase;margin-bottom:4px;">Status</div>
          <div><span class="status status-approved">Saved</span></div>
        </div>
      </div>
      <div style="padding:12px;background:var(--surface2);border-radius:6px;">
        <div style="font-size:12px;color:var(--text-muted);margin-bottom:8px;">Extracted Fields</div>
        <div style="font-size:13px;"><strong>Supplier:</strong> Datacom Solutions</div>
        <div style="font-size:13px;"><strong>Invoice #:</strong> INV-2026-00412</div>
        <div style="font-size:13px;"><strong>Amount:</strong> R 124,500.00</div>
      </div>
    `, [
      { label: 'Re-scan', class: 'btn-secondary', action: "closeModal();showPage('ocr-scan',null)" },
      { label: 'View Full Details', class: 'btn-primary', action: "closeModal();showPage('ocr-scan',null)" }
    ]);
  }, 500);
}

// ── INIT ──
document.addEventListener('DOMContentLoaded', function() {
  document.querySelector('.nav-item').classList.add('active');
});
</script>
</body>
</html>
